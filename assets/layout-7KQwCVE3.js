import{S as X}from"./sidebar-layout-DmqsIU0T.js";import{g as _,s as Y}from"./game-AtpgpTlS.js";import{p as Z,T as ee}from"./header-C2rgC6oY.js";import{j as t,e,A as N,O,t as l,c as g,b as k,d as G,S as v,k as a,F as z,q as re,l as te,r as le,a as ne}from"./index-DHCM5LJk.js";import{L as $}from"./link-C85afmZZ.js";import{g as j}from"./game-C-24t-6X.js";import{H as F}from"./game-Ct7CExFT.js";import{P as ae}from"./user-DLuZu1WC.js";import{a as se}from"./index-DzhbeeeD.js";import{a as q}from"./toast-Bmssr5_f.js";import{B as u}from"./button-CWvnh7OL.js";import{D as H}from"./divider-D2gFZMAr.js";import{D as w}from"./datetime-P2UEB0PT.js";import"./index-CcaEcIBT.js";import"./index-mQdWiL7h.js";import"./spin-B3vkVWkZ.js";import"./components-Dq7YmzrW.js";var ie=l('<div class="flex-1 overflow-hidden">');function ue(){return(()=>{var s=ie();return t(s,e(O,{get options(){return{scrollbars:{theme:`os-theme-${N()}`,autoHide:"scroll"}}},class:"relative w-full h-full print:h-auto print:overflow-auto",defer:!0})),s})()}var oe=l('<span class="icon-[fluent--add-20-regular] w-5 h-5">'),m=l("<span>"),L=l('<span class="icon-[fluent--chevron-double-left-20-regular] w-5 h-5">'),B=l('<span class="icon-[fluent--chevron-double-right-20-regular] w-5 h-5">'),ce=l('<div class="flex flex-col space-y-2 p-3 lg:p-6"><div class="flex flex-row space-x-2"></div><div class="flex flex-row space-x-2">'),ge=l('<div class="flex-1 overflow-hidden">'),D=l('<span class="icon-[fluent--text-bullet-list-dismiss-20-regular] w-5 h-5">'),de=l('<span class="icon-[fluent--dumbbell-20-regular] w-5 h-5">'),A=l('<span class="flex-1 text-start">'),fe=l('<div class="w-2 h-2 rounded-full bg-info">'),me=l('<span class="icon-[fluent--flag-20-regular] w-5 h-5">'),he=l("<div>");function pe(){const[s,b]=g([]),[o,y]=g(!1),[d,x]=g(1),P=6,[R,I]=g(1),[J,K]=g([]),[T,S]=g(!1),[f,C]=g(1),[Q,U]=g(1);function V(){y(!0),j(d(),P,F.CTFTraining).then(n=>{b(n[0]),I(n[1])}).catch(n=>{n.response.text().then(i=>{q({level:"error",description:`${a("training.failedToFetchPlaygrounds")}: ${i}`,duration:5e3})})}).finally(()=>{y(!1)})}function W(){S(!0),j(f(),P,F.CTFGame).then(n=>{K(n[0]),U(n[1])}).catch(n=>{n.response.text().then(i=>{q({level:"error",description:`${a("training.failedToFetchGames")}: ${i}`,duration:5e3})})}).finally(()=>{S(!1)})}return k(()=>{d()&&G(V)}),k(()=>{f()&&G(W)}),(()=>{var n=ge();return t(n,e(O,{get options(){return{scrollbars:{theme:`os-theme-${N()}`,autoHide:"scroll"}}},class:"relative w-full h-full print:h-auto print:overflow-auto",defer:!0,get children(){var i=ce(),h=i.firstChild,p=h.nextSibling;return t(i,e(v,{get when(){return se.permissions.includes(ae.Host)},get children(){return[e($,{level:"primary",get title(){return a("form.create")},href:"/training?create=true",get children(){return[oe(),(()=>{var r=m();return t(r,()=>a("form.create")),r})()]}}),e(H,{class:"!mt-3 lg:!mt-6"})]}}),h),t(h,e(u,{ghost:!0,disabled:!0,justify:"start",class:"flex-1",size:"sm",get children(){var r=m();return t(r,()=>a("training.title")),r}}),null),t(h,e(u,{square:!0,ghost:!0,size:"sm",get disabled(){return d()<=1},onClick:()=>x(d()-1),get children(){return L()}}),null),t(h,e(u,{ghost:!0,size:"sm",class:"min-w-8",get loading(){return o()},get children(){return e(v,{get when(){return!o()},get children(){var r=m();return t(r,d),r}})}}),null),t(h,e(u,{square:!0,ghost:!0,size:"sm",get disabled(){return d()>=R()},onClick:()=>x(d()+1),get children(){return B()}}),null),t(i,e(z,{get each(){return s()},get fallback(){return e(u,{ghost:!0,disabled:!0,get children(){return[D(),(()=>{var r=m();return t(r,()=>a("training.noPlaygrounds")),r})()]}})},children:r=>e($,{ghost:!0,get href(){return`/training/${r.id}`},activeMatch:"partial",justify:"start",get children(){return[de(),(()=>{var c=A();return t(c,()=>r.name),c})(),fe()]}})}),p),t(i,e(H,{class:"!mt-6"}),p),t(p,e(u,{ghost:!0,disabled:!0,justify:"start",size:"sm",class:"flex-1",get children(){var r=m();return t(r,()=>a("game.title")),r}}),null),t(p,e(u,{square:!0,ghost:!0,size:"sm",get disabled(){return f()<=1},onClick:()=>C(f()-1),get children(){return L()}}),null),t(p,e(u,{ghost:!0,size:"sm",class:"min-w-8",get loading(){return T()},get children(){return e(v,{get when(){return!T()},get children(){var r=m();return t(r,f),r}})}}),null),t(p,e(u,{square:!0,ghost:!0,size:"sm",get disabled(){return f()>=Q()},onClick:()=>C(f()+1),get children(){return B()}}),null),t(i,e(z,{get each(){return J()},get fallback(){return e(u,{ghost:!0,disabled:!0,get children(){return[D(),(()=>{var r=m();return t(r,()=>a("training.noArchivedGames")),r})()]}})},children:r=>e($,{ghost:!0,get href(){return`/training/${r.id}`},activeMatch:"partial",justify:"start",get disabled(){return r.archive_at>w.now()},get title(){return re(()=>r.archive_at>w.now())()?a("training.gameNotArchived"):void 0},get children(){return[me(),(()=>{var c=A();return t(c,()=>r.name),c})(),(()=>{var c=he();return te(()=>le(c,`w-2 h-2 rounded-full ${r.archive_at>w.now()?"bg-error":"bg-success"}`)),c})()]}})}),null),i}})),n})()}var M=l('<span class="icon-[fluent--dumbbell-20-filled] w-5 h-5 text-primary">'),E=l("<span>"),ve=l('<div class="flex flex-col overflow-hidden w-full h-full"><div class="border-b border-b-layer-content/10 px-2 h-16 flex items-center justify-center">');function $e(){return(()=>{var s=ve(),b=s.firstChild;return t(b,e(v,{get when(){return _.current},get fallback(){return e($,{class:"w-full",ghost:!0,justify:"start",href:"/training",get children(){return[M(),(()=>{var o=E();return t(o,()=>a("training.list")),o})()]}})},get children(){return e($,{class:"w-full",ghost:!0,justify:"start",get href(){return`/training/${_.current?.id}`},get children(){return[M(),(()=>{var o=E();return t(o,()=>_.current?.name),o})()]}})}})),t(s,e(v,{get when(){return _.current},get fallback(){return e(pe,{})},get children(){return e(ue,{})}}),null),s})()}function Be(s){return ne(()=>{Y({current:null,games:[],preload:null})}),[e(ee,{get title(){return`${a("training.title")} - ${Z.config.name||a("platform.name")}`}}),e(X,{get leftBar(){return e($e,{})},get children(){return s.children}})]}export{Be as default};
