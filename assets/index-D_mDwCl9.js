import{z as E,y as F,c as j,w as B,j as i,e as a,k as s,S as p,q as W,l as _,i as $,t as l,f as D}from"./index-D-4Ec2E9.js";import{a as b,d as K}from"./bulletin-CyjIO_w5.js";import{S as O}from"./spin-Cv0qhUOt.js";import{P as U}from"./user-DLuZu1WC.js";import{a as q}from"./index-CDuUghHV.js";import{a as d}from"./toast-RiaHQnvP.js";import{A as z}from"./article-B5D9jRlm.js";import{E as I}from"./form-CC1cKc49.js";import{A as v}from"./components-AHWt1IRQ.js";import"./datetime-P2UEB0PT.js";import"./card-r-C9G86U.js";import"./loading-tips-CriPG-RJ.js";import"./loading-tips-Bo-x9fE6.js";import"./popover-DNwyEML6.js";import"./use-environment-context-C2cuRCHg.js";import"./popover-root-C7Ww2Kgi.js";import"./use-presence-context-DB1lc17V.js";import"./use-locale-context-Cw8uL8t2.js";import"./article-DsbJ-ALU.js";import"./button-jqW8_kUd.js";import"./editor-C8Ki5-IP.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./setValue-D3eDTJml.js";import"./Form-DGUtLwyz.js";import"./input-C0wwSomq.js";import"./setValues-CxCjsZ5S.js";import"./required-C9pyDEac.js";var u=l("<span>"),R=l('<h1 class="text-3xl text-center flex flex-row space-x-4 items-center justify-center font-bold mt-8 print:mt-16">'),T=l('<span class="icon-[fluent--person-20-regular] w-5 h-5 print:hidden">'),G=l('<span class="hidden print:inline-block">By'),J=l('<div class="font-bold flex flex-row space-x-2 items-center print:hidden"><span class="icon-[fluent--calendar-edit-20-regular] w-5 h-5"></span><span>'),L=l('<span class="icon-[fluent--edit-20-regular] w-5 h-5">'),Q=l('<button class="font-bold hover:underline flex flex-row space-x-2 items-center print:hidden"type=button><span class="icon-[fluent--delete-20-regular] w-5 h-5"></span><span>'),V=l('<div class="flex flex-row items-center justify-center space-x-6 print:space-x-2 opacity-60 flex-wrap py-3"><div class="font-bold flex flex-row space-x-2 items-center"><span class="icon-[fluent--calendar-20-regular] w-5 h-5 print:hidden"></span><span class="hidden print:inline-block">at</span><span></span></div><button class="font-bold hover:underline flex flex-row space-x-2 items-center print:hidden"type=button><span class="icon-[fluent--print-20-regular] w-5 h-5"></span><span>');function Se(){const y=E(),m=Number.parseInt(y.article),[w,S]=F(),N=()=>w.edit==="true",[r,g]=j(null),o=B();Number.isNaN(m)&&o("/sigtrap/404",{replace:!0}),b(m).then(t=>{g(t)}).catch(t=>{t.response.text().then(e=>{d({level:"error",description:e,duration:5e3}),o(`/sigtrap/${t.response.status}`,{replace:!0})})});function k(){K(m).then(()=>{d({level:"success",description:s("bulletin.deleteSuccess"),duration:5e3}),o("/bulletin",{replace:!0})}).catch(t=>{t.response.text().then(e=>{d({level:"error",description:e,duration:5e3})})})}function M(t){b(t.id).then(e=>{g(e)}).catch(e=>{e.response.text().then(f=>{d({level:"error",description:f,duration:5e3}),o(`/sigtrap/${e.response.status}`,{replace:!0})})}),S({edit:void 0})}return[(()=>{var t=R();return i(t,a(p,{get when(){return r()},get fallback(){return[a(O,{width:32,height:32}),(()=>{var e=u();return i(e,()=>s("article.loading")),e})()]},get children(){var e=u();return i(e,()=>r().title),e}})),t})(),(()=>{var t=V(),e=t.firstChild,f=e.firstChild,A=f.nextSibling,H=A.nextSibling,c=e.nextSibling,P=c.firstChild,C=P.nextSibling;return i(t,a(v,{class:"hover:underline font-bold flex flex-row space-x-2 items-center",get title(){return s("article.by",{name:r()?.publisher_name||s("article.unknownPublisher")})},get href(){return`/users/${r()?.publisher_id}`},get children(){return[T(),G(),(()=>{var n=u();return i(n,()=>r()?.publisher_name),n})()]}}),e),i(H,()=>r()?.created_at.toFormat("yyyy-MM-dd HH:mm:ss")),i(t,a(p,{get when(){return W(()=>!!(r()?.created_at&&r()?.updated_at))()&&r().created_at!==r().updated_at},get children(){var n=J(),h=n.firstChild,x=h.nextSibling;return i(x,()=>r()?.updated_at.toFormat("yyyy-MM-dd HH:mm:ss")),_(()=>$(n,"title",s("article.updatedAt",{time:r()?.updated_at.toFormat("yyyy-MM-dd HH:mm:ss")||"UNKNOWN"}))),n}}),c),i(t,a(p,{get when(){return q.permissions.includes(U.Wiki)},get children(){return[a(v,{class:"font-bold hover:underline flex flex-row space-x-2 items-center print:hidden",get href(){return`/bulletin/${r()?.id}?edit=true`},get children(){return[L(),(()=>{var n=u();return i(n,()=>s("form.edit")),n})()]}}),(()=>{var n=Q(),h=n.firstChild,x=h.nextSibling;return n.$$click=k,i(x,()=>s("form.delete")),n})()]}}),c),c.$$click=()=>print(),i(C,()=>s("form.print")),_(()=>$(e,"title",s("article.createdAt",{time:r()?.created_at.toFormat("yyyy-MM-dd HH:mm:ss")||"UNKNOWN"}))),t})(),a(p,{get when(){return N()},get fallback(){return a(z,{class:"self-center",get content(){return r()?.content||""},extra:!0,headingAnchors:!0})},get children(){return a(I,{get editSource(){return r()||void 0},onDone:M})}})]}D(["click"]);export{Se as default};
