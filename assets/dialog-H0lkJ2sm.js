import{e as a,S as m,U as h,q as C,s as O,m as v,P as b,j as D,t as k}from"./index-D-4Ec2E9.js";import{c as F,b as T,e as S,f as w,g as L,n as B,r as f,j as R,k as $,m as p,a as u,u as N,l as j,o as q,q as G}from"./use-environment-context-C2cuRCHg.js";import{t as M,c as A,b as I,u as P,s as K,d as _,R as x,P as U}from"./use-presence-context-DB1lc17V.js";import{p as V,c as Z,d as z}from"./popover-root-C7Ww2Kgi.js";import{u as H}from"./use-locale-context-Cw8uL8t2.js";var W=F("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),c=W.build(),n=T({getPositionerId:e=>e.ids?.positioner??`dialog:${e.id}:positioner`,getBackdropId:e=>e.ids?.backdrop??`dialog:${e.id}:backdrop`,getContentId:e=>e.ids?.content??`dialog:${e.id}:content`,getTriggerId:e=>e.ids?.trigger??`dialog:${e.id}:trigger`,getTitleId:e=>e.ids?.title??`dialog:${e.id}:title`,getDescriptionId:e=>e.ids?.description??`dialog:${e.id}:description`,getCloseTriggerId:e=>e.ids?.closeTrigger??`dialog:${e.id}:close`,getContentEl:e=>n.getById(e,n.getContentId(e)),getPositionerEl:e=>n.getById(e,n.getPositionerId(e)),getBackdropEl:e=>n.getById(e,n.getBackdropId(e)),getTriggerEl:e=>n.getById(e,n.getTriggerId(e)),getTitleEl:e=>n.getById(e,n.getTitleId(e)),getDescriptionEl:e=>n.getById(e,n.getDescriptionId(e)),getCloseTriggerEl:e=>n.getById(e,n.getCloseTriggerId(e))});function J(e,o,t){const r=e.context["aria-label"],s=e.matches("open"),l=e.context.renderedElements;return{open:s,setOpen(i){i!==s&&o(i?"OPEN":"CLOSE")},getTriggerProps(){return t.button({...c.trigger.attrs,dir:e.context.dir,id:n.getTriggerId(e.context),"aria-haspopup":"dialog",type:"button","aria-expanded":s,"data-state":s?"open":"closed","aria-controls":n.getContentId(e.context),onClick(i){i.defaultPrevented||o("TOGGLE")}})},getBackdropProps(){return t.element({...c.backdrop.attrs,dir:e.context.dir,hidden:!s,id:n.getBackdropId(e.context),"data-state":s?"open":"closed"})},getPositionerProps(){return t.element({...c.positioner.attrs,dir:e.context.dir,id:n.getPositionerId(e.context),style:{pointerEvents:s?void 0:"none"}})},getContentProps(){return t.element({...c.content.attrs,dir:e.context.dir,role:e.context.role,hidden:!s,id:n.getContentId(e.context),tabIndex:-1,"data-state":s?"open":"closed","aria-modal":!0,"aria-label":r||void 0,"aria-labelledby":r||!l.title?void 0:n.getTitleId(e.context),"aria-describedby":l.description?n.getDescriptionId(e.context):void 0})},getTitleProps(){return t.element({...c.title.attrs,dir:e.context.dir,id:n.getTitleId(e.context)})},getDescriptionProps(){return t.element({...c.description.attrs,dir:e.context.dir,id:n.getDescriptionId(e.context)})},getCloseTriggerProps(){return t.button({...c.closeTrigger.attrs,dir:e.context.dir,id:n.getCloseTriggerId(e.context),type:"button",onClick(i){i.defaultPrevented||(i.stopPropagation(),o("CLOSE"))}})}}}function Q(e){const o=S(e);return w({id:"dialog",initial:o.open?"open":"closed",context:{role:"dialog",renderedElements:{title:!0,description:!0},modal:!0,trapFocus:!0,preventScroll:!0,closeOnInteractOutside:!0,closeOnEscape:!0,restoreFocus:!0,...o},created:["checkInitialFocusEl"],watch:{open:["toggleVisibility"]},states:{open:{entry:["checkRenderedElements","syncZIndex"],activities:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed",actions:["setFinalFocus"]},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose","setFinalFocus"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose","setFinalFocus"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}}},{guards:{isOpenControlled:t=>!!t["open.controlled"]},activities:{trackDismissableElement(t,r,{send:s}){return M(()=>n.getContentEl(t),{defer:!0,pointerBlocking:t.modal,exclude:[n.getTriggerEl(t)],onInteractOutside(i){t.onInteractOutside?.(i),(!t.closeOnInteractOutside||t.role==="alertdialog")&&i.preventDefault()},persistentElements:t.persistentElements,onFocusOutside:t.onFocusOutside,onPointerDownOutside:t.onPointerDownOutside,onEscapeKeyDown(i){t.onEscapeKeyDown?.(i),t.closeOnEscape?s({type:"CLOSE",src:"escape-key"}):i.preventDefault()},onDismiss(){s({type:"CLOSE",src:"interact-outside"})}})},preventScroll(t){if(t.preventScroll)return V(n.getDoc(t))},trapFocus(t){if(!t.trapFocus||!t.modal)return;let r;const s=B(()=>{const l=n.getContentEl(t);if(l){r=z(l,{document:n.getDoc(t),escapeDeactivates:!1,preventScroll:!0,returnFocusOnDeactivate:!1,fallbackFocus:l,allowOutsideClick:!0,initialFocus:R({root:l,getInitialEl:t.initialFocusEl})});try{r.activate()}catch{}}});return()=>{r?.deactivate(),s()}},hideContentBelow(t){return t.modal?Z(()=>[n.getContentEl(t)],{defer:!0}):void 0}},actions:{checkInitialFocusEl(t){!t.initialFocusEl&&t.role==="alertdialog"&&(t.initialFocusEl=()=>n.getCloseTriggerEl(t))},checkRenderedElements(t){f(()=>{t.renderedElements.title=!!n.getTitleEl(t),t.renderedElements.description=!!n.getDescriptionEl(t)})},syncZIndex(t){f(()=>{const r=n.getContentEl(t);if(!r)return;const l=n.getWin(t).getComputedStyle(r);[n.getPositionerEl(t),n.getBackdropEl(t)].forEach(d=>{d?.style.setProperty("--z-index",l.zIndex)})})},invokeOnClose(t){t.onOpenChange?.({open:!1})},invokeOnOpen(t){t.onOpenChange?.({open:!0})},toggleVisibility(t,r,{send:s}){s({type:t.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:r})},setFinalFocus(t){t.restoreFocus&&queueMicrotask(()=>{(t.finalFocusEl?.()??n.getTriggerEl(t))?.focus({preventScroll:!0})})}}})}L()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]);const[X,E]=$({hookName:"useDialogContext",providerName:"<DialogProvider />"}),Y=e=>{const o=E(),t=A(),r=I(p(t,()=>({present:o().open}))),s=p(()=>o().getBackdropProps(),()=>r().presenceProps,e);return a(m,{get when(){return!r().unmounted},get children(){return a(u.div,s)}})},ee=e=>{const o=E(),t=P(),r=p(()=>o().getContentProps(),()=>t().presenceProps,e);return a(m,{get when(){return!t().unmounted},get children(){return a(u.div,r)}})},te=e=>{const o=E(),t=P(),r=p(()=>o().getPositionerProps(),e);return a(m,{get when(){return!t().unmounted},get children(){return a(u.div,r)}})},ne=e=>{const o=H(),t=N(),r=h(),s=C(()=>({id:r,dir:o().dir,getRootNode:t().getRootNode,open:e.defaultOpen,"open.controlled":e.open!==void 0,...e})),[l,i]=j(Q(s()),{context:s});return C(()=>J(l,i,q))},oe=e=>{const[o,t]=K(e),[r]=_(o),[s,l]=G()(t,["aria-label","closeOnEscape","closeOnInteractOutside","defaultOpen","finalFocusEl","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]),i=ne(s),d=I(p(o,()=>({present:i().open})));return a(X,{value:i,get children(){return a(x,{value:r,get children(){return a(U,{value:d,get children(){return l.children}})}})}})},re=e=>{const o=E(),t=P(),r=p(()=>o().getTriggerProps(),()=>({"aria-controls":t().unmounted&&null}),e);return a(u.button,r)};var se=k('<div class="card-content p-3 lg:p-6">');function pe(e){const[o,t]=O(e,["level","size","ghost","bold","justify","uppercase","loading","square"]),[r,s]=O(t,["closeOnEscape","closeOnInteractOutside","defaultOpen","finalFocusEl","id","ids","initialFocusEl","lazyMount","modal","onEscapeKeyDown","onExitComplete","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open","persistentElements","present","preventScroll","restoreFocus","role","trapFocus","unmountOnExit"]),[l,i]=O(s,["btnContent","children"]),d=()=>({btn:!0,[`btn-${o.level}`]:!!o.level,[`btn-${o.size||"md"}`]:!0,"btn-ghost":o.ghost,"btn-bold":o.bold,[`justify-${o.justify||"center"}`]:!0,uppercase:o.uppercase,"btn-square":o.square}),y=()=>Object.keys(d()).filter(g=>d()[g]).join(" ");return a(oe,v(r,{lazyMount:!0,unmountOnExit:!0,get children(){return[a(re,v(i,{get class(){return`${y()} ${i.class}`},get title(){return i.title},get children(){return l.btnContent}})),a(b,{get children(){return[a(Y,{class:"fixed backdrop-blur bg-layer/60 top-0 left-0 w-screen h-screen"}),a(te,{class:"fixed top-0 left-0 w-screen h-screen flex items-center justify-center",get children(){return a(ee,{class:"card",get children(){var g=se();return D(g,()=>l.children),g}})}})]}})]}}))}export{pe as D};
