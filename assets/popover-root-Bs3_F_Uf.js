import{r as W,i as De,c as ke,b as Re,d as Ae,e as Le,f as Be,g as xe,h as Ke,p as Me,n as Ge,j as le,k as je,m as re,a as me,u as $e,l as Ve,o as Ue,q as qe}from"./use-environment-context-CrE27ks0.js";import{e as x,S as ye,U as We,q as ce}from"./index-DHCM5LJk.js";import{g as Xe,a as ue,t as Ye,u as Ee,s as He,b as Je,P as Ze}from"./use-presence-context-C0VfJ-0L.js";import{u as Qe}from"./use-locale-context-Bwyb0cy2.js";var j=new WeakMap,I=[];function ze(r,e={}){const{rootEl:t}=e,n=r.filter(Boolean);if(n.length===0)return;const a=n[0].ownerDocument||document,l=a.defaultView??window,o=new Set(n),u=new Set,f=t??a.body;let h=g=>{for(let P of g.querySelectorAll("[data-live-announcer], [data-zag-top-layer]"))o.add(P);let b=P=>{if(o.has(P)||u.has(P.parentElement)&&P.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let U of o)if(P.contains(U))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},w=a.createTreeWalker(g,NodeFilter.SHOW_ELEMENT,{acceptNode:b}),k=b(g);if(k===NodeFilter.FILTER_ACCEPT&&N(g),k!==NodeFilter.FILTER_REJECT){let P=w.nextNode();for(;P!=null;)N(P),P=w.nextNode()}},N=g=>{let b=j.get(g)??0;g.getAttribute("aria-hidden")==="true"&&b===0||(b===0&&g.setAttribute("aria-hidden","true"),u.add(g),j.set(g,b+1))};I.length&&I[I.length-1].disconnect(),h(f);const E=new l.MutationObserver(g=>{for(let b of g)if(!(b.type!=="childList"||b.addedNodes.length===0)&&![...o,...u].some(w=>w.contains(b.target))){for(let w of b.removedNodes)w instanceof l.Element&&(o.delete(w),u.delete(w));for(let w of b.addedNodes)(w instanceof l.HTMLElement||w instanceof l.SVGElement)&&(w.dataset.liveAnnouncer==="true"||w.dataset.zagTopLayer==="true")?o.add(w):w instanceof l.Element&&h(w)}});E.observe(f,{childList:!0,subtree:!0});let O={observe(){E.observe(f,{childList:!0,subtree:!0})},disconnect(){E.disconnect()}};return I.push(O),()=>{E.disconnect();for(let g of u){let b=j.get(g);b===1?(g.removeAttribute("aria-hidden"),j.delete(g)):j.set(g,b-1)}O===I[I.length-1]?(I.pop(),I.length&&I[I.length-1].observe()):I.splice(I.indexOf(O),1)}}function _e(r,e={}){const{defer:t}=e,n=t?W:l=>l(),a=[];return a.push(n(()=>{const l=typeof r=="function"?r():r;a.push(ze(l,e))})),()=>{a.forEach(l=>l?.())}}var _="data-zag-scroll-lock";function de(r,e){if(!r)return;const t=r.style.cssText;return Object.assign(r.style,e),()=>{r.style.cssText=t}}function et(r,e,t){if(!r)return;const n=r.style.getPropertyValue(e);return r.style.setProperty(e,t),()=>{n?r.style.setProperty(e,n):r.style.removeProperty(e)}}function tt(r){const e=r.getBoundingClientRect().left;return Math.round(e)+r.scrollLeft?"paddingLeft":"paddingRight"}function rt(r){const e=r??document,t=e.defaultView??window,{documentElement:n,body:a}=e;if(a.hasAttribute(_))return;a.setAttribute(_,"");const o=t.innerWidth-n.clientWidth,u=()=>et(n,"--scrollbar-width",`${o}px`),f=tt(n),h=()=>de(a,{overflow:"hidden",[f]:`${o}px`}),N=()=>{const{scrollX:O,scrollY:g,visualViewport:b}=t,w=b?.offsetLeft??0,k=b?.offsetTop??0,P=de(a,{position:"fixed",overflow:"hidden",top:`${-(g-Math.floor(k))}px`,left:`${-(O-Math.floor(w))}px`,right:"0",[f]:`${o}px`});return()=>{P?.(),t.scrollTo({left:O,top:g,behavior:"instant"})}},E=[u(),De()?N():h()];return()=>{E.forEach(O=>O?.()),a.removeAttribute(_)}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var we=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],X=we.join(","),Te=typeof Element>"u",L=Te?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Y=!Te&&Element.prototype.getRootNode?function(r){var e;return r==null||(e=r.getRootNode)===null||e===void 0?void 0:e.call(r)}:function(r){return r?.ownerDocument},H=function r(e,t){var n;t===void 0&&(t=!0);var a=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),l=a===""||a==="true",o=l||t&&e&&r(e.parentNode);return o},nt=function(e){var t,n=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return n===""||n==="true"},Pe=function(e,t,n){if(H(e))return[];var a=Array.prototype.slice.apply(e.querySelectorAll(X));return t&&L.call(e,X)&&a.unshift(e),a=a.filter(n),a},Ne=function r(e,t,n){for(var a=[],l=Array.from(e);l.length;){var o=l.shift();if(!H(o,!1))if(o.tagName==="SLOT"){var u=o.assignedElements(),f=u.length?u:o.children,h=r(f,!0,n);n.flatten?a.push.apply(a,h):a.push({scopeParent:o,candidates:h})}else{var N=L.call(o,X);N&&n.filter(o)&&(t||!e.includes(o))&&a.push(o);var E=o.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(o),O=!H(E,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(o));if(E&&O){var g=r(E===!0?o.children:E.children,!0,n);n.flatten?a.push.apply(a,g):a.push({scopeParent:o,candidates:g})}else l.unshift.apply(l,o.children)}}return a},Oe=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},A=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||nt(e))&&!Oe(e)?0:e.tabIndex},ot=function(e,t){var n=A(e);return n<0&&t&&!Oe(e)?0:n},at=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Fe=function(e){return e.tagName==="INPUT"},it=function(e){return Fe(e)&&e.type==="hidden"},st=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return t},lt=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},ct=function(e){if(!e.name)return!0;var t=e.form||Y(e),n=function(u){return t.querySelectorAll('input[type="radio"][name="'+u+'"]')},a;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")a=n(window.CSS.escape(e.name));else try{a=n(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var l=lt(a,e.form);return!l||l===e},ut=function(e){return Fe(e)&&e.type==="radio"},dt=function(e){return ut(e)&&!ct(e)},ft=function(e){var t,n=e&&Y(e),a=(t=n)===null||t===void 0?void 0:t.host,l=!1;if(n&&n!==e){var o,u,f;for(l=!!((o=a)!==null&&o!==void 0&&(u=o.ownerDocument)!==null&&u!==void 0&&u.contains(a)||e!=null&&(f=e.ownerDocument)!==null&&f!==void 0&&f.contains(e));!l&&a;){var h,N,E;n=Y(a),a=(h=n)===null||h===void 0?void 0:h.host,l=!!((N=a)!==null&&N!==void 0&&(E=N.ownerDocument)!==null&&E!==void 0&&E.contains(a))}}return l},fe=function(e){var t=e.getBoundingClientRect(),n=t.width,a=t.height;return n===0&&a===0},vt=function(e,t){var n=t.displayCheck,a=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var l=L.call(e,"details>summary:first-of-type"),o=l?e.parentElement:e;if(L.call(o,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof a=="function"){for(var u=e;e;){var f=e.parentElement,h=Y(e);if(f&&!f.shadowRoot&&a(f)===!0)return fe(e);e.assignedSlot?e=e.assignedSlot:!f&&h!==e.ownerDocument?e=h.host:e=f}e=u}if(ft(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return fe(e);return!1},pt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var n=0;n<t.children.length;n++){var a=t.children.item(n);if(a.tagName==="LEGEND")return L.call(t,"fieldset[disabled] *")?!0:!a.contains(e)}return!0}t=t.parentElement}return!1},J=function(e,t){return!(t.disabled||H(t)||it(t)||vt(t,e)||st(t)||pt(t))},te=function(e,t){return!(dt(t)||A(t)<0||!J(e,t))},bt=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},gt=function r(e){var t=[],n=[];return e.forEach(function(a,l){var o=!!a.scopeParent,u=o?a.scopeParent:a,f=ot(u,o),h=o?r(a.candidates):u;f===0?o?t.push.apply(t,h):t.push(u):n.push({documentOrder:l,tabIndex:f,item:a,isScope:o,content:h})}),n.sort(at).reduce(function(a,l){return l.isScope?a.push.apply(a,l.content):a.push(l.content),a},[]).concat(t)},ht=function(e,t){t=t||{};var n;return t.getShadowRoot?n=Ne([e],t.includeContainer,{filter:te.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:bt}):n=Pe(e,t.includeContainer,te.bind(null,t)),gt(n)},mt=function(e,t){t=t||{};var n;return t.getShadowRoot?n=Ne([e],t.includeContainer,{filter:J.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):n=Pe(e,t.includeContainer,J.bind(null,t)),n},B=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return L.call(e,X)===!1?!1:te(t,e)},yt=we.concat("iframe").join(","),ee=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return L.call(e,yt)===!1?!1:J(t,e)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function ve(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function pe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ve(Object(t),!0).forEach(function(n){Et(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ve(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Et(r,e,t){return e=Tt(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function wt(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Tt(r){var e=wt(r,"string");return typeof e=="symbol"?e:String(e)}var be={activateTrap:function(e,t){if(e.length>0){var n=e[e.length-1];n!==t&&n.pause()}var a=e.indexOf(t);a===-1||e.splice(a,1),e.push(t)},deactivateTrap:function(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}},Pt=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Nt=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},V=function(e){return e?.key==="Tab"||e?.keyCode===9},Ot=function(e){return V(e)&&!e.shiftKey},Ft=function(e){return V(e)&&e.shiftKey},ge=function(e){return setTimeout(e,0)},he=function(e,t){var n=-1;return e.every(function(a,l){return t(a)?(n=l,!1):!0}),n},$=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return typeof e=="function"?e.apply(void 0,n):e},q=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Ct=[],It=function(e,t){var n=t?.document||document,a=t?.trapStack||Ct,l=pe({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Ot,isKeyBackward:Ft},t),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},u,f=function(s,i,c){return s&&s[i]!==void 0?s[i]:l[c||i]},h=function(s,i){var c=typeof i?.composedPath=="function"?i.composedPath():void 0;return o.containerGroups.findIndex(function(v){var p=v.container,y=v.tabbableNodes;return p.contains(s)||c?.includes(p)||y.find(function(T){return T===s})})},N=function(s){var i=l[s];if(typeof i=="function"){for(var c=arguments.length,v=new Array(c>1?c-1:0),p=1;p<c;p++)v[p-1]=arguments[p];i=i.apply(void 0,v)}if(i===!0&&(i=void 0),!i){if(i===void 0||i===!1)return i;throw new Error("`".concat(s,"` was specified but was not a node, or did not return a node"))}var y=i;if(typeof i=="string"&&(y=n.querySelector(i),!y))throw new Error("`".concat(s,"` as selector refers to no known node"));return y},E=function(){var s=N("initialFocus");if(s===!1)return!1;if(s===void 0||!ee(s,l.tabbableOptions))if(h(n.activeElement)>=0)s=n.activeElement;else{var i=o.tabbableGroups[0],c=i&&i.firstTabbableNode;s=c||N("fallbackFocus")}if(!s)throw new Error("Your focus-trap needs to have at least one focusable element");return s},O=function(){if(o.containerGroups=o.containers.map(function(s){var i=ht(s,l.tabbableOptions),c=mt(s,l.tabbableOptions),v=i.length>0?i[0]:void 0,p=i.length>0?i[i.length-1]:void 0,y=c.find(function(F){return B(F)}),T=c.slice().reverse().find(function(F){return B(F)}),C=!!i.find(function(F){return A(F)>0});return{container:s,tabbableNodes:i,focusableNodes:c,posTabIndexesFound:C,firstTabbableNode:v,lastTabbableNode:p,firstDomTabbableNode:y,lastDomTabbableNode:T,nextTabbableNode:function(R){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,D=i.indexOf(R);return D<0?M?c.slice(c.indexOf(R)+1).find(function(G){return B(G)}):c.slice(0,c.indexOf(R)).reverse().find(function(G){return B(G)}):i[D+(M?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(s){return s.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!N("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(s){return s.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},g=function m(s){var i=s.activeElement;if(i)return i.shadowRoot&&i.shadowRoot.activeElement!==null?m(i.shadowRoot):i},b=function m(s){if(s!==!1&&s!==g(document)){if(!s||!s.focus){m(E());return}s.focus({preventScroll:!!l.preventScroll}),o.mostRecentlyFocusedNode=s,Pt(s)&&s.select()}},w=function(s){var i=N("setReturnFocus",s);return i||(i===!1?!1:s)},k=function(s){var i=s.target,c=s.event,v=s.isBackward,p=v===void 0?!1:v;i=i||q(c),O();var y=null;if(o.tabbableGroups.length>0){var T=h(i,c),C=T>=0?o.containerGroups[T]:void 0;if(T<0)p?y=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:y=o.tabbableGroups[0].firstTabbableNode;else if(p){var F=he(o.tabbableGroups,function(Q){var z=Q.firstTabbableNode;return i===z});if(F<0&&(C.container===i||ee(i,l.tabbableOptions)&&!B(i,l.tabbableOptions)&&!C.nextTabbableNode(i,!1))&&(F=T),F>=0){var R=F===0?o.tabbableGroups.length-1:F-1,M=o.tabbableGroups[R];y=A(i)>=0?M.lastTabbableNode:M.lastDomTabbableNode}else V(c)||(y=C.nextTabbableNode(i,!1))}else{var D=he(o.tabbableGroups,function(Q){var z=Q.lastTabbableNode;return i===z});if(D<0&&(C.container===i||ee(i,l.tabbableOptions)&&!B(i,l.tabbableOptions)&&!C.nextTabbableNode(i))&&(D=T),D>=0){var G=D===o.tabbableGroups.length-1?0:D+1,se=o.tabbableGroups[G];y=A(i)>=0?se.firstTabbableNode:se.firstDomTabbableNode}else V(c)||(y=C.nextTabbableNode(i))}}else y=N("fallbackFocus");return y},P=function(s){var i=q(s);if(!(h(i,s)>=0)){if($(l.clickOutsideDeactivates,s)){u.deactivate({returnFocus:l.returnFocusOnDeactivate});return}$(l.allowOutsideClick,s)||s.preventDefault()}},U=function(s){var i=q(s),c=h(i,s)>=0;if(c||i instanceof Document)c&&(o.mostRecentlyFocusedNode=i);else{s.stopImmediatePropagation();var v,p=!0;if(o.mostRecentlyFocusedNode)if(A(o.mostRecentlyFocusedNode)>0){var y=h(o.mostRecentlyFocusedNode),T=o.containerGroups[y].tabbableNodes;if(T.length>0){var C=T.findIndex(function(F){return F===o.mostRecentlyFocusedNode});C>=0&&(l.isKeyForward(o.recentNavEvent)?C+1<T.length&&(v=T[C+1],p=!1):C-1>=0&&(v=T[C-1],p=!1))}}else o.containerGroups.some(function(F){return F.tabbableNodes.some(function(R){return A(R)>0})})||(p=!1);else p=!1;p&&(v=k({target:o.mostRecentlyFocusedNode,isBackward:l.isKeyBackward(o.recentNavEvent)})),b(v||o.mostRecentlyFocusedNode||E())}o.recentNavEvent=void 0},Ie=function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=s;var c=k({event:s,isBackward:i});c&&(V(s)&&s.preventDefault(),b(c))},ne=function(s){if(Nt(s)&&$(l.escapeDeactivates,s)!==!1){s.preventDefault(),u.deactivate();return}(l.isKeyForward(s)||l.isKeyBackward(s))&&Ie(s,l.isKeyBackward(s))},oe=function(s){var i=q(s);h(i,s)>=0||$(l.clickOutsideDeactivates,s)||$(l.allowOutsideClick,s)||(s.preventDefault(),s.stopImmediatePropagation())},ae=function(){if(o.active)return be.activateTrap(a,u),o.delayInitialFocusTimer=l.delayInitialFocus?ge(function(){b(E())}):b(E()),n.addEventListener("focusin",U,!0),n.addEventListener("mousedown",P,{capture:!0,passive:!1}),n.addEventListener("touchstart",P,{capture:!0,passive:!1}),n.addEventListener("click",oe,{capture:!0,passive:!1}),n.addEventListener("keydown",ne,{capture:!0,passive:!1}),u},ie=function(){if(o.active)return n.removeEventListener("focusin",U,!0),n.removeEventListener("mousedown",P,!0),n.removeEventListener("touchstart",P,!0),n.removeEventListener("click",oe,!0),n.removeEventListener("keydown",ne,!0),u},Se=function(s){var i=s.some(function(c){var v=Array.from(c.removedNodes);return v.some(function(p){return p===o.mostRecentlyFocusedNode})});i&&b(E())},Z=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(Se):void 0,K=function(){Z&&(Z.disconnect(),o.active&&!o.paused&&o.containers.map(function(s){Z.observe(s,{subtree:!0,childList:!0})}))};return u={get active(){return o.active},get paused(){return o.paused},activate:function(s){if(o.active)return this;var i=f(s,"onActivate"),c=f(s,"onPostActivate"),v=f(s,"checkCanFocusTrap");v||O(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=n.activeElement,i?.();var p=function(){v&&O(),ae(),K(),c?.()};return v?(v(o.containers.concat()).then(p,p),this):(p(),this)},deactivate:function(s){if(!o.active)return this;var i=pe({onDeactivate:l.onDeactivate,onPostDeactivate:l.onPostDeactivate,checkCanReturnFocus:l.checkCanReturnFocus},s);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,ie(),o.active=!1,o.paused=!1,K(),be.deactivateTrap(a,u);var c=f(i,"onDeactivate"),v=f(i,"onPostDeactivate"),p=f(i,"checkCanReturnFocus"),y=f(i,"returnFocus","returnFocusOnDeactivate");c?.();var T=function(){ge(function(){y&&b(w(o.nodeFocusedBeforeActivation)),v?.()})};return y&&p?(p(w(o.nodeFocusedBeforeActivation)).then(T,T),this):(T(),this)},pause:function(s){if(o.paused||!o.active)return this;var i=f(s,"onPause"),c=f(s,"onPostPause");return o.paused=!0,i?.(),ie(),K(),c?.(),this},unpause:function(s){if(!o.paused||!o.active)return this;var i=f(s,"onUnpause"),c=f(s,"onPostUnpause");return o.paused=!1,i?.(),O(),ae(),K(),c?.(),this},updateContainerElements:function(s){var i=[].concat(s).filter(Boolean);return o.containers=i.map(function(c){return typeof c=="string"?n.querySelector(c):c}),o.active&&O(),K(),this}},u.updateContainerElements(e),u},St=ke("popover").parts("arrow","arrowTip","anchor","trigger","indicator","positioner","content","title","description","closeTrigger"),S=St.build(),d=Re({getAnchorId:r=>r.ids?.anchor??`popover:${r.id}:anchor`,getTriggerId:r=>r.ids?.trigger??`popover:${r.id}:trigger`,getContentId:r=>r.ids?.content??`popover:${r.id}:content`,getPositionerId:r=>r.ids?.positioner??`popover:${r.id}:popper`,getArrowId:r=>r.ids?.arrow??`popover:${r.id}:arrow`,getTitleId:r=>r.ids?.title??`popover:${r.id}:title`,getDescriptionId:r=>r.ids?.description??`popover:${r.id}:desc`,getCloseTriggerId:r=>r.ids?.closeTrigger??`popover:${r.id}:close`,getAnchorEl:r=>d.getById(r,d.getAnchorId(r)),getTriggerEl:r=>d.getById(r,d.getTriggerId(r)),getContentEl:r=>d.getById(r,d.getContentId(r)),getPositionerEl:r=>d.getById(r,d.getPositionerId(r)),getTitleEl:r=>d.getById(r,d.getTitleId(r)),getDescriptionEl:r=>d.getById(r,d.getDescriptionId(r)),getFocusableEls:r=>Ke(d.getContentEl(r)),getFirstFocusableEl:r=>d.getFocusableEls(r)[0]});function Dt(r,e,t){const n=r.matches("open"),a=r.context.currentPlacement,l=r.context.currentPortalled,o=r.context.renderedElements,u=Xe({...r.context.positioning,placement:a});return{portalled:l,open:n,setOpen(f){f!==n&&e(f?"OPEN":"CLOSE")},reposition(f={}){e({type:"POSITIONING.SET",options:f})},getArrowProps(){return t.element({id:d.getArrowId(r.context),...S.arrow.attrs,dir:r.context.dir,style:u.arrow})},getArrowTipProps(){return t.element({...S.arrowTip.attrs,dir:r.context.dir,style:u.arrowTip})},getAnchorProps(){return t.element({...S.anchor.attrs,dir:r.context.dir,id:d.getAnchorId(r.context)})},getTriggerProps(){return t.button({...S.trigger.attrs,dir:r.context.dir,type:"button","data-placement":a,id:d.getTriggerId(r.context),"aria-haspopup":"dialog","aria-expanded":n,"data-state":n?"open":"closed","aria-controls":d.getContentId(r.context),onClick(f){f.defaultPrevented||e("TOGGLE")},onBlur(f){e({type:"TRIGGER_BLUR",target:f.relatedTarget})}})},getIndicatorProps(){return t.element({...S.indicator.attrs,dir:r.context.dir,"data-state":n?"open":"closed"})},getPositionerProps(){return t.element({id:d.getPositionerId(r.context),...S.positioner.attrs,dir:r.context.dir,style:u.floating})},getContentProps(){return t.element({...S.content.attrs,dir:r.context.dir,id:d.getContentId(r.context),tabIndex:-1,role:"dialog",hidden:!n,"data-state":n?"open":"closed","data-expanded":Ae(n),"aria-labelledby":o.title?d.getTitleId(r.context):void 0,"aria-describedby":o.description?d.getDescriptionId(r.context):void 0,"data-placement":a})},getTitleProps(){return t.element({...S.title.attrs,id:d.getTitleId(r.context),dir:r.context.dir})},getDescriptionProps(){return t.element({...S.description.attrs,id:d.getDescriptionId(r.context),dir:r.context.dir})},getCloseTriggerProps(){return t.button({...S.closeTrigger.attrs,dir:r.context.dir,id:d.getCloseTriggerId(r.context),type:"button","aria-label":"close",onClick(f){f.defaultPrevented||e("CLOSE")}})}}}function kt(r){const e=Le(r);return Be({id:"popover",initial:e.open?"open":"closed",context:{closeOnInteractOutside:!0,closeOnEscape:!0,autoFocus:!0,modal:!1,portalled:!0,positioning:{placement:"bottom",...e.positioning},currentPlacement:void 0,...e,renderedElements:{title:!0,description:!0}},computed:{currentPortalled:t=>!!t.modal||!!t.portalled},watch:{open:["toggleVisibility"]},entry:["checkRenderedElements"],states:{closed:{on:{"CONTROLLED.OPEN":{target:"open",actions:["setInitialFocus"]},TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus"]}]}},open:{activities:["trapFocus","preventScroll","hideContentBelow","trackPositioning","trackDismissableElement","proxyTabFocus"],on:{"CONTROLLED.CLOSE":{target:"closed",actions:["setFinalFocus"]},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose","setFinalFocus"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"POSITIONING.SET":{actions:"reposition"}}}}},{guards:{isOpenControlled:t=>!!t["open.controlled"]},activities:{trackPositioning(t){t.currentPlacement=t.positioning.placement;const n=d.getAnchorEl(t)??d.getTriggerEl(t);return ue(n,()=>d.getPositionerEl(t),{...t.positioning,defer:!0,onComplete(l){t.currentPlacement=l.placement}})},trackDismissableElement(t,n,{send:a}){const l=()=>d.getContentEl(t);let o=!0;return Ye(l,{pointerBlocking:t.modal,exclude:d.getTriggerEl(t),defer:!0,onEscapeKeyDown(u){t.onEscapeKeyDown?.(u),!t.closeOnEscape&&u.preventDefault()},onInteractOutside(u){t.onInteractOutside?.(u),!u.defaultPrevented&&(o=!(u.detail.focusable||u.detail.contextmenu),t.closeOnInteractOutside||u.preventDefault())},onPointerDownOutside:t.onPointerDownOutside,onFocusOutside:t.onFocusOutside,persistentElements:t.persistentElements,onDismiss(){a({type:"CLOSE",src:"interact-outside",restoreFocus:o})}})},proxyTabFocus(t){return t.modal||!t.portalled?void 0:Me(()=>d.getContentEl(t),{triggerElement:d.getTriggerEl(t),defer:!0,onFocus(a){a.focus({preventScroll:!0})}})},hideContentBelow(t){return t.modal?_e(()=>[d.getContentEl(t),d.getTriggerEl(t)],{defer:!0}):void 0},preventScroll(t){if(t.modal)return rt(d.getDoc(t))},trapFocus(t){if(!t.modal)return;let n;return Ge(()=>{const a=d.getContentEl(t);if(a){n=It(a,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,document:d.getDoc(t),fallbackFocus:a,initialFocus:le({root:d.getContentEl(t),getInitialEl:t.initialFocusEl,enabled:t.autoFocus})});try{n.activate()}catch{}}}),()=>n?.deactivate()}},actions:{reposition(t,n){const a=d.getAnchorEl(t)??d.getTriggerEl(t);ue(a,()=>d.getPositionerEl(t),{...t.positioning,...n.options,defer:!0,listeners:!1,onComplete(o){t.currentPlacement=o.placement}})},checkRenderedElements(t){W(()=>{Object.assign(t.renderedElements,{title:!!d.getTitleEl(t),description:!!d.getDescriptionEl(t)})})},setInitialFocus(t){t.modal||W(()=>{le({root:d.getContentEl(t),getInitialEl:t.initialFocusEl,enabled:t.autoFocus})?.focus({preventScroll:!0})})},setFinalFocus(t,n){n.restoreFocus&&W(()=>{d.getTriggerEl(t)?.focus({preventScroll:!0})})},invokeOnOpen(t){t.onOpenChange?.({open:!0})},invokeOnClose(t){t.onOpenChange?.({open:!1})},toggleVisibility(t,n,{send:a}){a({type:t.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:n})}}})}xe()(["autoFocus","closeOnEscape","closeOnInteractOutside","dir","getRootNode","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","portalled","positioning"]);const[Rt,Ce]=je({hookName:"usePopoverContext",providerName:"<PopoverProvider />"}),Mt=r=>{const e=Ce(),t=Ee(),n=re(()=>e().getContentProps(),()=>t().presenceProps,r);return x(ye,{get when(){return!t().unmounted},get children(){return x(me.div,n)}})},Gt=r=>{const e=Ce(),t=Ee(),n=re(()=>e().getPositionerProps(),r);return x(ye,{get when(){return!t().unmounted},get children(){return x(me.div,n)}})},At=r=>{const e=Qe(),t=$e(),n=We(),a=ce(()=>({id:n,dir:e().dir,getRootNode:t().getRootNode,open:r.defaultOpen,"open.controlled":r.open!==void 0,...r})),[l,o]=Ve(kt(a()),{context:a});return ce(()=>Dt(l,o,Ue))},jt=r=>{const[e,t]=He(r),[n,a]=qe()(t,["autoFocus","closeOnEscape","closeOnInteractOutside","defaultOpen","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open","persistentElements","portalled","positioning"]),l=At(n),o=Je(re(e,()=>({present:l().open})));return x(Rt,{value:l,get children(){return x(Ze,{value:o,get children(){return a.children}})}})};export{Gt as P,Mt as a,jt as b,_e as c,It as d,rt as p,Ce as u};
