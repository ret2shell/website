import{c as $,b as M,j as a,e as n,l as _,i as N,S as D,k as b,r as j,t as c,q as k,P as V}from"./index-D-4Ec2E9.js";import{D as x}from"./datetime-P2UEB0PT.js";import{B as g}from"./button-jqW8_kUd.js";import{C as z}from"./card-r-C9G86U.js";import{D as H}from"./divider-CRTXR2Ng.js";import{I,P as B}from"./input-C0wwSomq.js";import{s as S}from"./setValue-D3eDTJml.js";import{P as F,a as A,b as Y}from"./popover-root-C7Ww2Kgi.js";var K=c("<span>"),O=c('<span class="icon-[fluent--chevron-up-20-regular] w-5 h-5">'),P=c('<span class="icon-[fluent--chevron-down-20-regular] w-5 h-5">'),L=c('<div class="card-content p-2 flex flex-col space-y-2"><div class="flex flex-row space-x-2"><div class="flex flex-col space-y-2"></div><div class="flex flex-col space-y-2">'),R=c('<span class="icon-[fluent--chevron-double-left-20-regular] w-5 h-5">'),W=c('<span class="icon-[fluent--chevron-left-20-regular] w-5 h-5">'),G=c("<span>-"),J=c('<span class="icon-[fluent--chevron-right-20-regular] w-5 h-5">'),Q=c('<span class="icon-[fluent--chevron-double-right-20-regular] w-5 h-5">'),U=c('<div class="flex flex-row space-x-2">'),X=c('<div class="grid grid-cols-7 gap-2 justify-items-center">'),Z=c('<div class="h-12 min-w-12 w-full flex justify-center items-center font-bold opacity-60">'),p=c("<input class=hidden type=number>"),ee=c("<div><input class=hidden type=number>"),te=c('<span class="icon-[fluent--calendar-20-regular] w-5 h-5">'),ne=c('<span class="icon-[fluent--delete-20-regular] w-5 h-5">');function re(e){let s=x.now();s=s.set({hour:0,minute:0,second:0,millisecond:0});const[d,o]=$(!1),[l,i]=$(e.date.hour),[f,m]=$(e.date.minute);return n(Y,{autoFocus:!1,get open(){return d()},onInteractOutside:()=>o(!1),get children(){return[n(B,{get children(){return n(g,{get ghost(){return k(()=>!e.active)()&&!d()},square:!0,class:"relative",get disabled(){return e.disabled},onClick:()=>{e.type==="time"?o(!0):e.onDone(e.date)},type:"button",get children(){var h=K();return a(h,()=>e.date.day.toString().padStart(2,"0")),_(t=>{var r=!e.current,u=!!s.equals(e.date);return r!==t.e&&h.classList.toggle("opacity-30",t.e=r),u!==t.t&&h.classList.toggle("text-primary",t.t=u),t},{e:void 0,t:void 0}),h}})}}),n(V,{get children(){return n(F,{get children(){return n(A,{class:"card",get children(){var h=L(),t=h.firstChild,r=t.firstChild,u=r.nextSibling;return a(r,n(g,{square:!0,ghost:!0,type:"button",size:"sm",onClick:()=>{i((l()-1+24)%24)},get children(){return O()}}),null),a(r,n(g,{square:!0,ghost:!0,type:"button",size:"sm",get children(){return l().toString().padStart(2,"0")}}),null),a(r,n(g,{square:!0,ghost:!0,type:"button",size:"sm",onClick:()=>{i((l()+1)%24)},get children(){return P()}}),null),a(u,n(g,{square:!0,ghost:!0,type:"button",size:"sm",onClick:()=>{f()<10&&i((l()-1+24)%24),m((f()-10+60)%60)},get children(){return O()}}),null),a(u,n(g,{square:!0,ghost:!0,type:"button",size:"sm",get children(){return f().toString().padStart(2,"0")}}),null),a(u,n(g,{square:!0,ghost:!0,type:"button",size:"sm",onClick:()=>{f()>=50&&i((l()+1)%24),m((f()+10)%60)},get children(){return P()}}),null),a(h,n(g,{level:"primary",type:"button",size:"sm",onClick:()=>{o(!1),e.onDone(x.fromObject({year:e.date.year,month:e.date.month,day:e.date.day,hour:l(),minute:f()}))},children:"OK"}),null),h}})}})}})]}})}function ae(e){let s=x.now();s=s.set({hour:0,minute:0,second:0,millisecond:0});const[d,o]=$(s.year),[l,i]=$(s.month);function f(t){switch(t){case 0:return"calendar.day.sun";case 1:return"calendar.day.mon";case 2:return"calendar.day.tue";case 3:return"calendar.day.wed";case 4:return"calendar.day.thu";case 5:return"calendar.day.fri";case 6:return"calendar.day.sat";default:return"calendar.day.sun"}}const m=k(()=>{const t=[],r=x.fromObject({year:d(),month:l(),day:1}),u=r.minus({month:1}),v=r,w=v.daysInMonth;let C=v.startOf("month").weekday;C===7&&(C=0);const E=u.daysInMonth,T=E-C,q=(7-(C+w)%7)%7;for(let y=T;y<E;y++)t.push(x.fromObject({year:u.year,month:u.month,day:y+1}));for(let y=0;y<w;y++)t.push(x.fromObject({year:v.year,month:v.month,day:y+1}));for(let y=0;y<q;y++)t.push(x.fromObject({year:v.year,month:v.month+1,day:y+1}));return t});function h(t){return e.startEdge&&t<e.startEdge||e.endEdge&&t>e.endEdge?!!e.reverseEdge:e.reverseEdge&&e.startEdge&&e.endEdge?t<e.startEdge||t>e.endEdge:!0}return[(()=>{var t=U();return a(t,n(g,{class:"hidden md:inline-flex",ghost:!0,square:!0,type:"button",onClick:()=>o(d()-1),get title(){return b("calendar.jumpToPrevYear")},get children(){return R()}}),null),a(t,n(g,{ghost:!0,square:!0,type:"button",onClick:()=>{l()===1?(o(d()-1),i(12)):i(l()-1)},get title(){return b("calendar.jumpToPrevMonth")},get children(){return W()}}),null),a(t,n(g,{ghost:!0,class:"flex-1",type:"button",onClick:()=>{o(s.year),i(s.month)},get title(){return b("calendar.jumpToToday")},get children(){var r=G(),u=r.firstChild;return a(r,()=>d().toString().padStart(4,"0"),u),a(r,()=>l().toString().padStart(2,"0"),null),r}}),null),a(t,n(g,{ghost:!0,square:!0,type:"button",onClick:()=>{l()===12?(o(d()+1),i(1)):i(l()+1)},get title(){return b("calendar.jumpToNextMonth")},get children(){return J()}}),null),a(t,n(g,{class:"hidden md:inline-flex",ghost:!0,type:"button",square:!0,onClick:()=>o(d()+1),get title(){return b("calendar.jumpToNextYear")},get children(){return Q()}}),null),t})(),n(H,{class:"hidden lg:inline-block"}),(()=>{var t=X();return a(t,()=>Array.from({length:7}).map((r,u)=>(()=>{var v=Z();return a(v,()=>b(f(u))),v})()),null),a(t,()=>m().map(r=>n(re,{get active(){return k(()=>!!e.value)()&&r.startOf("day").equals(e.value.startOf("day"))||e.value&&e.valueNext&&r.startOf("day")>=e.value.startOf("day")&&r<=e.valueNext.startOf("day")||void 0},get disabled(){return!h(r)},date:r,get current(){return r.month===l()},get type(){return e.type},onDone:u=>{e.range&&e.value&&e.valueNext?(e.setValue(null),e.setValueNext(null)):!e.range&&e.value&&e.setValue(null),e.range&&e.value?u<e.value?(e.setValueNext(e.value),e.setValue(u)):e.setValueNext(u):e.setValue(u)}})),null),t})()]}function ge(e){const[s,d]=$(null),[o,l]=$(null);return M(()=>{e.value?d(x.fromSeconds(e.value)):d(null)}),M(()=>{e.range&&e.valueNext?l(x.fromSeconds(e.valueNext)):l(null)}),M(()=>{S(e.form,e.name,s()?s().toSeconds():void 0)}),M(()=>{e.range&&S(e.form,e.nameNext,o()?o().toSeconds():void 0)}),(()=>{var i=ee(),f=i.firstChild;return a(i,n(D,{get when(){return e.range},get children(){var m=p();return _(()=>N(m,"name",e.range&&e.nameNext||void 0)),_(()=>m.value=e.range&&e.valueNext||void 0),m}}),null),a(i,n(I,{get icon(){return te()},readOnly:!0,get title(){return e.title},get placeholder(){return e.placeholder},get error(){return e.error},get value(){return(s()?.toFormat(e.type==="date"?"yyyy-MM-dd":"yyyy-MM-dd HH:mm")||b("calendar.startTime"))+(e.range?` => ${o()?.toFormat(e.type==="date"?"yyyy-MM-dd":"yyyy-MM-dd HH:mm")||b("calendar.endTime")}`:"")},get extraBtn(){return n(g,{class:"!rounded-l-none",type:"button",onClick:()=>{d(null),l(null)},get children(){return ne()}})}}),null),a(i,n(z,{class:"mt-2 card-field",contentClass:"p-2 flex flex-col space-y-2",get children(){return n(ae,{get value(){return s()},setValue:d,get valueNext(){return o()},setValueNext:l,get range(){return e.range},get type(){return e.type},get startEdge(){return e.startEdge},get endEdge(){return e.endEdge},get reverseEdge(){return e.reverseEdge}})}}),null),_(m=>{var h=`flex flex-col ${e.class}`,t=e.name;return h!==m.e&&j(i,m.e=h),t!==m.t&&N(f,"name",m.t=t),m},{e:void 0,t:void 0}),_(()=>f.value=e.value),i})()}export{ge as T};
