import{o as me,u as Z,t as n,c as k,s as $e,a as we,b as N,d as O,e,m as ve,f as Ae,g as Le,h as F,i as K,j as r,k as a,S as $,l as j,n as E,p as Me,q as b,r as B,F as le,v as D,M as v,w as _e,x as Q,y as Pe,z as De}from"./index-DHCM5LJk.js";import{L as xe}from"./logo-animate-DwzBVVhL.js";import{m as Be}from"./media-DKWJ99ov.js";import{k as oe,a as m,g as qe,s as Ge,b as Ie,r as Fe,l as Ne,c as Ve}from"./index-DzhbeeeD.js";import{H as J}from"./game-Ct7CExFT.js";import{P as V}from"./user-DLuZu1WC.js";import{g,c as ue,a as de,i as Oe}from"./game-AtpgpTlS.js";import{p as S,s as He,a as re}from"./header-C2rgC6oY.js";import{a as se,r as ne,t as G,c as ye,s as Re}from"./toast-Bmssr5_f.js";import{B as p}from"./button-CWvnh7OL.js";import{C as T}from"./card-D1oJOCbi.js";import{D as Ee}from"./divider-D2gFZMAr.js";import{L as x}from"./link-C85afmZZ.js";import{L as Ue}from"./loading-tips-D8Ukv1g_.js";import{P as H}from"./popover-C_nceKuQ.js";import{D as I}from"./datetime-P2UEB0PT.js";import{P as We,a as Xe,b as Je}from"./progress-track-C_i3-6mM.js";import{T as ae}from"./timer-DxgOX93i.js";import{T as Ze,a as Ke}from"./index-CcaEcIBT.js";import{I as Qe}from"./input-Cs8V4IvD.js";import{A as ge}from"./avatar-BmvDKrrB.js";import{D as Ye}from"./dialog-DeIumok6.js";import"./spin-B3vkVWkZ.js";import"./components-Dq7YmzrW.js";import"./loading-tips-CelvmSQ5.js";import"./use-environment-context-CrE27ks0.js";import"./popover-root-Bs3_F_Uf.js";import"./use-presence-context-C0VfJ-0L.js";import"./use-locale-context-Bwyb0cy2.js";import"./index-mQdWiL7h.js";var et=n('<div class="fixed -left-1 -right-1 -top-1 -bottom-1 -z-10 print:hidden"><div class="fixed left-0 right-0 top-0 bottom-0 bg-layer/90 transition-colors duration-700"></div><svg viewBox="0 0 960 1080"xmlns=http://www.w3.org/2000/svg class="fixed left-0 bottom-0 h-screen opacity-30 print:hidden"><path fill=none stroke=#0078d6 stroke-width=2 class=draw-line d="m 83.478,259.804 v 635.69 l 149.375,86.242 237.176,1.452 M 198.499,72.087 V 281.204 M 140.555,75.89 v 172.015 m -13.23,489.908 V 871.884 L 227.58,929.766 H 379.447 M 169.527,98.227 v 231.986 m 640.793,752.976 -44.681,25.797 -44.682,-25.798 v -51.594 l 44.682,-25.797 44.682,25.797 z m -574.446,-600.33 -52.053,30.053 -52.053,-30.053 v -60.105 l 52.053,-30.053 52.053,30.053 z m 241.557,279.378 -80.277,46.348 -80.277,-46.348 v -92.696 l 80.277,-46.348 80.277,46.348 z m 121.296,200.638 -64.129,37.024 -64.129,-37.024 v -74.05 L 534.6,851.8 l 64.128,37.025 z m -451.467,110.626 -84.862,48.996 -84.863,-48.996 v -97.99 l 84.863,-48.996 84.863,48.995 z m 596.244,-12.605 -63.03,36.39 -63.03,-36.39 v -72.78 l 63.03,-36.39 63.03,36.39 z M 441.216,710.96 V 990.648 L 198.999,1130.492 -43.218,990.648 m 0,0 V 710.96 L 198.999,571.116 441.216,710.96 M 151.2,661.853 66.614,710.688 -17.972,661.853 v -97.671 l 84.586,-48.836 84.586,48.836 z"></path></svg><svg viewBox="0 0 960 1080"xmlns=http://www.w3.org/2000/svg class="fixed right-0 top-0 h-screen opacity-30 print:hidden"><path fill=none stroke=#0078d6 stroke-width=2 class=draw-line d="M 775.404,949.219 V 655.867 m 30.909,110.107 v 248.831 M 744.495,734.571 V 949.22 M 227.247,51.277 h 312.9 l 157.678,91.035 V 375.633 M 869.273,123.11 V 641.557 M 819.189,92.992 v 320.8 l -172.163,99.399 m 344.854,19.149 -46.215,26.682 -46.214,-26.681 v -53.364 l 46.214,-26.682 46.215,26.682 z M 287.623,57.625 227.246,92.484 166.87,57.625 v -69.717 l 60.377,-34.858 60.376,34.858 z M 672.455,73.331 574.651,129.798 476.847,73.331 V -39.603 l 97.804,-56.467 97.804,56.467 z M 500.727,195.65 442.267,229.402 383.805,195.65 v -67.505 l 58.461,-33.752 58.46,33.752 z m 213.226,350.724 -80.277,46.348 -80.277,-46.348 v -92.696 l 80.277,-46.348 80.277,46.348 z m 187.357,-262.25 -62.733,36.22 -62.733,-36.22 v -72.438 l 62.733,-36.219 62.733,36.22 z m 107.319,396.82 -100.908,58.26 -100.908,-58.26 V 564.426 l 100.908,-58.26 100.908,58.26 z M 524.695,399.648 V 119.96 L 766.912,-19.884 1009.129,119.96 m 0,0 V 399.648 L 766.912,539.492 524.695,399.648">');function he(){let l,t;return me(()=>{setTimeout(()=>{l.classList.remove("draw-line"),t.classList.remove("draw-line")},3e3)}),(()=>{var s=et(),u=s.firstChild,d=u.nextSibling,c=d.firstChild,o=d.nextSibling,h=o.firstChild,i=l;typeof i=="function"?Z(i,c):l=c;var f=t;return typeof f=="function"?Z(f,h):t=h,s})()}var A=(l=>(l[l.Disconnected=0]="Disconnected",l[l.Pending=1]="Pending",l[l.Connected=2]="Connected",l))(A||{});class tt{constructor(){[this.connected,this.setConnected]=k(0),[this.instances,this.setInstances]=k([]),[this.traffic,this.setTraffic]=k([]),[this.apiAddr,this.setApiAddr]=k("http://127.0.0.1:3307")}async checkConnection(){try{(await oe.get(`${this.apiAddr()}/connect`)).status===201?this.setConnected(1):this.setConnected(2)}catch{this.setConnected(0)}return this.connected()}async tryConnect(){await oe.post(`${this.apiAddr()}/connect`,{json:location.origin})}}const w=new tt;function ie(l){const[t,s]=$e(l,["startAt","endAt","static"]),[u,d]=k(!1),[c,o]=k(I.now()),h=setInterval(()=>{o(I.now())},1e3),i=()=>t.startAt.diff(c()).milliseconds/t.startAt.diff(t.endAt).milliseconds*100;return we(()=>clearInterval(h)),N(()=>{c()>t.endAt&&!u()&&O(()=>{d(!0),l.onTimeout?.()})}),N(()=>{t.endAt>I.now()&&O(()=>{d(!1)})}),e(Je,ve(s,{min:0,max:100,get value(){return i()},get children(){return e(We,{class:"progress-track",get children(){return e(Xe,{class:"progress-range",get classList(){return{"progress-range-error":!t.static&&i()>80,"progress-range-warning":!t.static&&i()>50&&i()<=80,"progress-range-success":!t.static&&i()<=50,"progress-range-primary":t.static}}})}})}}))}const rt="/assets/darkmode-stars-BwF3TmTZ.svg";var nt=n('<div class="absolute top-0 left-0 w-full h-full opacity-0 hover:opacity-100 transition-opacity bg-layer/60 flex items-center justify-center space-x-2"><span class="icon-[fluent--tab-desktop-link-20-regular] w-5 h-5"></span><span>'),lt=n('<button class=darkmode-wrapper type=button><img class=darkmode-stars alt="Darkmode stars"><span class=darkmode-button>');function st(){let l;return(()=>{var t=lt(),s=t.firstChild;s.nextSibling,t.$$click=()=>{Le(F.colorScheme==="dark"?"light":"dark")};var u=l;return typeof u=="function"?Z(u,t):l=t,s.$$contextmenu=()=>!1,K(s,"src",rt),r(t,e($,{get when(){return F.colorSchemeFollowsSystem},get children(){var d=nt(),c=d.firstChild,o=c.nextSibling;return r(o,()=>a("platform.systemTheme")),d}}),null),j(d=>{var c=F.colorScheme,o=F.colorSchemeFollowsSystem;return c!==d.e&&K(t,"data-color-scheme",d.e=c),o!==d.t&&(t.disabled=d.t=o),d},{e:void 0,t:void 0}),t})()}Ae(["click","contextmenu"]);var at=n("<span>简"),it=n("<span>繁"),ct=n("<span>En"),ot=n("<span>な"),ut=n('<span class="icon-[fluent--position-forward-20-filled] w-5 h-5 text-primary">'),dt=n('<ul class="flex flex-row space-x-2"><li></li><li></li><li></li><li></li><li>'),gt=n('<div class="flex flex-col space-y-2 max-w-64">'),ht=n('<span class="icon-[fluent--position-forward-20-regular] w-5 h-5 opacity-60">'),ft=n('<span class="icon-[fluent--wand-20-regular] w-5 h-5">');function Ce(){return(()=>{var l=gt();return r(l,e(T,{get children(){return e(st,{})}}),null),r(l,e(T,{contentClass:"p-2 flex flex-col space-y-2",get children(){var t=dt(),s=t.firstChild,u=s.nextSibling,d=u.nextSibling,c=d.nextSibling,o=c.nextSibling;return r(s,e(p,{square:!0,onClick:()=>E("zh_cn"),ghost:!0,justify:"center",size:"sm",get children(){return at()}})),r(u,e(p,{square:!0,onClick:()=>E("zh_tw"),ghost:!0,justify:"center",size:"sm",get children(){return it()}})),r(d,e(p,{square:!0,onClick:()=>E("en_us"),ghost:!0,justify:"center",size:"sm",get children(){return ct()}})),r(c,e(p,{square:!0,onClick:()=>E("ja_jp"),ghost:!0,justify:"center",size:"sm",get children(){return ot()}})),r(o,e(p,{size:"sm",ghost:!0,square:!0,justify:"center",onClick:()=>{Me({colorSchemeFollowsSystem:!F.colorSchemeFollowsSystem})},get title(){return a("platform.followSystem")},get children(){return e($,{get when(){return F.colorSchemeFollowsSystem},get fallback(){return ht()},get children(){return ut()}})}})),t}}),null),l})()}function pt(){return e(H,{get btnContent(){return ft()},square:!0,ghost:!0,popContentClass:"pt-2",get title(){return a("platform.diyBox")},get children(){return e(Ce,{})}})}var U=n("<span>"),mt=n('<span class="icon-[fluent--arrow-download-20-regular] w-5 h-5">'),$t=n('<span class="icon-[fluent--arrow-reset-20-regular] w-5 h-5">'),wt=n('<span class="icon-[fluent--checkmark-20-regular] w-5 h-5">'),vt=n('<div class="flex flex-col space-y-2 max-w-96 w-[calc(100vw-1rem)]">'),_t=n('<span class="icon-[fluent--play-circle-hint-20-regular] w-5 h-5 text-success">'),xt=n("<span class=flex-1>"),yt=n('<span class="icon-[fluent--copy-20-regular] w-5 h-5 text-success">'),Ct=n('<span class="truncate text-nowrap opacity-60">WSRX'),bt=n('<span class="icon-[fluent--copy-20-regular] w-5 h-5 text-info">'),kt=n('<span class="truncate text-nowrap opacity-60">LOCAL'),zt=n('<span class="icon-[fluent--open-20-regular] w-5 h-5 text-info">'),St=n('<span class="icon-[fluent--clock-alarm-20-regular] w-5 h-5 text-info">'),Tt=n('<span class="icon-[fluent--record-stop-20-regular] w-5 h-5 text-error">'),jt=n('<div class="flex flex-row space-x-2"><div class=flex-1>'),At=n('<span class="icon-[fluent--fluid-20-regular] w-5 h-5">');function be(){const[l,t]=k(!1),[s,u]=k(!1);function d(){w.tryConnect().catch(()=>{}),t(!0),setTimeout(()=>{w.checkConnection().then(()=>{t(!1)})},1e3)}N(()=>{m.token&&O(d)});let c=A.Disconnected;N(()=>{w.connected()===A.Disconnected&&c!==A.Disconnected&&se({level:"warning",description:a("instance.wsrxDisconnected"),duration:10*1e3}),c=w.connected()});const o=setInterval(()=>{w.connected()&&w.checkConnection()},5*1e3);return we(()=>{clearInterval(o)}),(()=>{var h=vt();return r(h,e(T,{contentClass:"p-2 flex flex-row space-x-2",get children(){return[e(p,{get disabled(){return l()},get loading(){return l()||w.connected()===A.Pending},class:"flex-1",justify:"start",ghost:!0,get title(){return a("instance.retryLinkWsrx")},size:"sm",onClick:d,get children(){return[e($,{get when(){return b(()=>!l())()&&w.connected()!==A.Pending},get children(){var i=U();return j(()=>B(i,`icon-[fluent--fluid-20-regular] w-5 h-5 ${w.connected()===A.Connected?"text-success":"text-warning"}`)),i}}),(()=>{var i=U();return r(i,(()=>{var f=b(()=>!!l());return()=>f()?a("instance.connecting"):(()=>{var C=b(()=>w.connected()===A.Connected);return()=>C()?a("instance.connected"):(()=>{var P=b(()=>w.connected()===A.Pending);return()=>P()?a("instance.pending"):a("instance.disconnected")})()})()})()),j(()=>B(i,l()?"text-base opacity-60":w.connected()===A.Connected?"text-success font-bold":"text-warning")),i})()]}}),e(p,{get ghost(){return!s()},square:!0,get title(){return a("instance.wsrxSettings")},size:"sm",onClick:()=>u(!s()),get children(){var i=U();return j(()=>B(i,`icon-[fluent--settings-20-${s()?"filled":"regular"}] w-5 h-5 ${s()?"text-primary":""}`)),i}}),e(x,{href:"https://github.com/XDSEC/WebSocketReflectorX/releases",ghost:!0,square:!0,target:"_blank",get title(){return a("instance.downloadWsrx")},size:"sm",get children(){return mt()}})]}}),null),r(h,e($,{get when(){return s()},get children(){return e(T,{contentClass:"p-2 flex flex-row space-x-2",get children(){return[e(Qe,{size:"sm",class:"flex-1",placeholder:"http://127.0.0.1:3307",get value(){return w.apiAddr()},onBlur:i=>{w.setApiAddr(i.target.value)}}),e(p,{size:"sm",square:!0,get title(){return a("instance.defaultApiAddr")},ghost:!0,onClick:()=>{w.setApiAddr("http://127.0.0.1:3307")},get children(){return $t()}}),e(p,{size:"sm",square:!0,get title(){return a("form.save")},ghost:!0,get children(){return wt()}})]}})}}),null),r(h,e(le,{get each(){return w.instances()},children:i=>e(T,{contentClass:"p-2 flex flex-col space-y-2",get children(){return[e(p,{size:"sm",ghost:!0,get children(){return[_t(),(()=>{var f=U();return r(f,()=>i.challenge_name),f})(),xt(),e(ae,{class:"opacity-60",get end(){return i.started_at.plus({hours:i.renew_count+1})}})]}}),e(ie,{class:"px-2",get startAt(){return i.started_at},get endAt(){return i.started_at.plus({hours:i.renew_count+1})}}),(()=>{var f=jt(),C=f.firstChild;return r(f,e(p,{ghost:!0,size:"sm",get title(){return a("instance.copyWsrxAddr")},get children(){return[yt(),Ct()]}}),C),r(f,e(p,{ghost:!0,size:"sm",get title(){return b(()=>!!w.connected())()?a("instance.copyLocalAddr"):a("instance.needLocalDaemon")},get disabled(){return w.connected()===null},get children(){return[bt(),kt()]}}),C),r(f,e(p,{size:"sm",square:!0,ghost:!0,get title(){return b(()=>!!w.connected())()?a("instance.openLocalAddr"):a("instance.needLocalDaemon")},get disabled(){return w.connected()===null},get children(){return zt()}}),C),r(f,e(p,{size:"sm",square:!0,ghost:!0,get title(){return a("instance.renew")},get children(){return St()}}),null),r(f,e(p,{size:"sm",square:!0,ghost:!0,get title(){return a("instance.stop")},get children(){return Tt()}}),null),f})()]}})}),null),h})()}function Lt(){return e(H,{get btnContent(){return At()},ghost:!0,square:!0,popContentClass:"pt-2",get title(){return a("instance.box")},get children(){return e(be,{})}})}var Mt=n('<div class="flex flex-row items-center justify-center p-6"><img class="w-24 h-24"alt="Toast Broken">'),Pt=n('<div class="flex flex-row items-center justify-end space-x-2">'),Dt=n('<div class="flex flex-col space-y-2"><span class="inline-block space-x-2 px-2 py-1"><span></span><span class="text-wrap align-middle">'),Bt=n('<span class="icon-[fluent--dismiss-20-regular] w-5 h-5">'),qt=n('<div class="absolute bottom-1 left-4 h-[2px] right-4"><div>');function ke(l){const[t,s]=$e(l,["toast"]);let u;me(()=>{if(l.selfDestroy&&t.toast.duration&&t.toast.duration>0){if(setTimeout(()=>{u.classList.remove("w-full"),u.style.transitionDuration=`${t.toast.duration}ms`,u.classList.add("w-0")},100),!t.toast.duration)return;setTimeout(()=>{l.onTimeout?.()},t.toast.duration+100)}});function d(c){switch(c){case"info":return"icon-[fluent--info-20-regular]";case"success":return"icon-[fluent--checkmark-circle-20-regular]";case"warning":return"icon-[fluent--warning-20-regular]";case"error":return"icon-[fluent--dismiss-circle-20-regular]";default:return"icon-[fluent--info-20-regular]"}}return e(T,ve(s,{get class(){return`toast ${s.class}`},contentClass:"p-2 group relative",get children(){return[(()=>{var c=Dt(),o=c.firstChild,h=o.firstChild,i=h.nextSibling;return r(c,e($,{get when(){return t.toast.img},get children(){var f=Mt(),C=f.firstChild;return j(()=>K(C,"src",t.toast.img)),f}}),o),r(i,()=>t.toast.description),r(c,e($,{get when(){return t.toast.reject||t.toast.accept},get children(){var f=Pt();return r(f,e($,{get when(){return t.toast.reject},get children(){return e(p,{size:"sm",ghost:!0,get onClick(){return t.toast.reject},get children(){return t.toast.rejectLabel||a("platform.reject")}})}}),null),r(f,e($,{get when(){return t.toast.accept},get children(){return e(p,{size:"sm",level:"primary",get onClick(){return t.toast.accept},get children(){return t.toast.acceptLabel||a("platform.accept")}})}}),null),f}}),null),j(()=>B(h,`align-middle ${d(t.toast.level)} w-5 h-5 text-${t.toast.level}`)),c})(),e(p,{class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",size:"sm",square:!0,onClick:()=>t.toast.id&&ne(t.toast.id),get children(){return Bt()}}),e($,{get when(){return l.selfDestroy&&t.toast.duration},get children(){var c=qt(),o=c.firstChild,h=u;return typeof h=="function"?Z(h,o):u=o,j(()=>B(o,`w-full h-full bg-${t.toast.level} transition-all ease-linear`)),c}})]}}))}var ze=n("<span>"),Gt=n('<h2 class="px-2 flex-1 flex items-center space-x-2 font-bold"><span class="icon-[fluent--alert-20-regular] w-5 h-5">'),It=n('<div class="flex flex-col space-y-2 max-w-96 w-[calc(100vw-1rem)]">'),Ft=n("<span class=opacity-60>");function Se(){return(()=>{var l=It();return r(l,e(T,{contentClass:"p-2 h-12 flex flex-row items-center space-x-2",get children(){return[(()=>{var t=Gt();return t.firstChild,r(t,e($,{get when(){return G.toasts.length>0},get fallback(){return(()=>{var s=Ft();return r(s,()=>a("platform.noNotifications")),s})()},get children(){var s=ze();return r(s,()=>a("platform.notificationBox")),s}}),null),t})(),e($,{get when(){return G.toasts.length>0},get children(){return e(p,{size:"sm",ghost:!0,level:"info",onClick:()=>ye(),get children(){return a("platform.clearNotifications")}})}})]}}),null),r(l,e(le,{get each(){return G.toasts},children:t=>e(ke,{toast:t})}),null),l})()}function Nt(){return e(H,{get btnContent(){return(()=>{var l=ze();return j(()=>B(l,`${G.toasts.length>0?"icon-[fluent--alert-badge-20-filled] text-primary":"icon-[fluent--alert-20-regular]"} w-5 h-5`)),l})()},square:!0,ghost:!0,popContentClass:"pt-2",get title(){return a("platform.notificationBox")},get children(){return e(Se,{})}})}var Vt=n('<div class="fixed bottom-0 right-0 p-2 max-w-96 w-[calc(100vw-1rem)] flex flex-col space-y-2">');function Ot(){const l=()=>G.toasts.filter(t=>t.shown!==!1);return(()=>{var t=Vt();return r(t,e(Ze,{name:"toast",get children(){return e(le,{get each(){return l()},children:s=>e(ke,{toast:s,selfDestroy:!0,onTimeout:()=>{Re({toasts:G.toasts.map(u=>u.id===s.id?{...u,shown:!1}:u)})}})})}})),t})()}var Ht=n('<span class="icon-[fluent--warning-20-regular] w-10 h-10 flex-shrink-0 text-warning">'),Rt=n("<span class=text-warning>"),Et=n('<span class="font-extrabold text-5xl tracking-widest">'),Ut=n('<span class="icon-[fluent--person-link-20-regular] w-10 h-10 opacity-60">'),Wt=n("<span class=opacity-60>"),Xt=n('<span class="icon-[fluent--emoji-hand-20-regular] w-5 h-5">'),te=n("<span class=truncate>"),Jt=n('<span class="icon-[fluent--arrow-clockwise-20-regular] w-5 h-5">'),Zt=n('<div class="flex flex-col w-64 space-y-2"><div class="w-full min-h-36 flex flex-col items-center justify-center space-y-2">'),Kt=n('<span class="icon-[fluent--person-link-20-regular] w-5 h-5">'),Qt=n("<span>");function Yt(){const[l,t]=k(null),[s,u]=k(!0);function d(){u(!0),qe().then(t).catch(()=>t(null)).finally(()=>u(!1))}function c(){m.warnedCodeGeneration||Ge({warnedCodeGeneration:!0}),t(null),u(!0),setTimeout(()=>{Ie().then(t).catch(o=>{o.response.text().then(h=>{se({level:"error",description:h,duration:5e3})})}).finally(()=>u(!1))},500)}return N(()=>{m.token?O(d):t(null)}),e(Ye,{size:"sm",justify:"start",ghost:!0,get btnContent(){return[Kt(),(()=>{var o=Qt();return r(o,()=>a("account.code.title")),o})()]},get children(){var o=Zt(),h=o.firstChild;return r(h,e(D,{get children(){return[e(v,{get when(){return!m.warnedCodeGeneration},get children(){return[Ht(),(()=>{var i=Rt();return r(i,()=>a("account.code.warn")),i})()]}}),e(v,{get when(){return l()},get children(){return[(()=>{var i=Et();return r(i,()=>l()?.code.toString(16).toUpperCase().padStart(6,"0")),i})(),e(ie,{class:"w-full",get startAt(){return l().generate_at},get endAt(){return l().generate_at.plus({seconds:300})},onTimeout:()=>{t(null)}}),e(ae,{class:"opacity-80",get end(){return l().generate_at.plus({seconds:300})}})]}}),e(v,{when:!0,get children(){return[Ut(),(()=>{var i=Wt();return r(i,()=>a("account.code.null")),i})()]}})]}})),r(o,e(p,{level:"primary",square:!0,get title(){return a("account.code.refresh")},onClick:c,get loading(){return s()},get disabled(){return s()},get children(){return e(D,{get children(){return[e(v,{get when(){return!m.warnedCodeGeneration},get children(){return[Xt(),(()=>{var i=te();return r(i,()=>a("account.code.confirmWarn")),i})()]}}),e(v,{get when(){return s()},get children(){var i=te();return r(i,()=>a("form.loading")),i}}),e(v,{when:!0,get children(){return[Jt(),(()=>{var i=te();return r(i,()=>a("account.code.refresh")),i})()]}})]}})}}),null),o}})}var er=n('<div class="flex flex-col justify-center items-start"><h2 class=font-bold></h2><span class="text-start text-base font-normal opacity-60">0x'),tr=n('<span class="icon-[fluent--settings-20-regular] w-5 h-5">'),rr=n("<span>"),nr=n('<span class="icon-[fluent--sign-out-20-regular] w-5 h-5 text-error">'),lr=n('<div class="flex flex-row space-x-2">'),W=n('<span class="icon-[fluent--flag-20-regular] w-5 h-5 text-primary">'),X=n('<span class="flex-1 truncate text-start">'),sr=n("<div>"),ar=n('<div class="flex flex-col space-y-2 max-w-64 w-[calc(100vw-1rem)]">'),ir=n('<span class="icon-[fluent--person-20-regular] w-5 h-5">');function cr(){N(()=>{m.token&&O(Fe)});const l=_e(),[t,s]=k(!1);function u(){s(!0),setTimeout(()=>{Ne().finally(()=>{Ve(),l("/"),ye(),s(!1)})},1e3)}return e($,{get when(){return m.token},get fallback(){return e(x,{href:"/account/login",get title(){return a("account.login.title")},ghost:!0,get children(){return[ir(),b(()=>a("account.login.title"))]}})},get children(){return e(H,{get title(){return a("account.box")},get btnContent(){return e(ge,{class:"w-8 h-8",get src(){return m.info?.avatar||void 0},get fallback(){return m.info?.account||void 0}})},square:!0,ghost:!0,popContentClass:"pt-2",get children(){var d=ar();return r(d,e(T,{contentClass:"p-2 flex flex-col space-y-2",get children(){return e(x,{ghost:!0,class:"h-16 space-x-2 flex-shrink-0 py-1 flex-nowrap",justify:"start",get href(){return`/users/${m.info?.id}`},get children(){return[e(ge,{class:"w-10 h-10",get src(){return m.info?.avatar||void 0},get fallback(){return m.info?.account||void 0},get loading(){return t()}}),(()=>{var c=er(),o=c.firstChild,h=o.nextSibling;return h.firstChild,r(o,()=>m.info?.nickname),r(h,()=>m.info?.id.toString(16).padStart(6,"0"),null),c})()]}})}}),null),r(d,e(T,{contentClass:"p-2 flex flex-col space-y-2",get children(){return e(Yt,{})}}),null),r(d,e(T,{contentClass:"p-2 flex flex-col space-y-2",get children(){var c=lr();return r(c,e(x,{href:"/account/settings",ghost:!0,size:"sm",justify:"start",class:"flex-1",get children(){return[tr(),(()=>{var o=rr();return r(o,()=>a("account.settings.title")),o})()]}}),null),r(c,e(p,{ghost:!0,size:"sm",square:!0,get title(){return a("account.logout")},onClick:u,get loading(){return t()},get children(){return e($,{get when(){return!t()},get children(){return nr()}})}}),null),c}}),null),r(d,e($,{get when(){return g.current&&g.current.host_type===J.CTFGame},get children(){return e(T,{contentClass:"p-2 flex flex-row space-x-2",get children(){return e(D,{get children(){return[e(v,{get when(){return m.permissions.includes(V.Host)||m.permissions.includes(V.Game)&&g.current?.admins.includes(m.id)},get children(){return e(p,{size:"sm",justify:"start",class:"flex-1 overflow-hidden",get title(){return a("game.adminCanNotTakePartIn")},disabled:!0,get children(){return[W(),(()=>{var c=X();return r(c,()=>a("game.adminCanNotTakePartIn")),c})()]}})}}),e(v,{get when(){return g.team},get children(){return e(x,{get href(){return`/games/${g.current?.id}/teams/${g.team?.id}`},ghost:!0,size:"sm",justify:"start",class:"flex-1",get children(){return[W(),(()=>{var c=X();return r(c,()=>g.team?.name),c})()]}})}}),e(v,{get when(){return g.team},get children(){return sr()}}),e(v,{get when(){return ue()&&g.team===null},get children(){return e(x,{get href(){return`/games/${g.current?.id}/teams/create`},ghost:!0,size:"sm",justify:"start",class:"flex-1",get children(){return[W(),(()=>{var c=X();return r(c,()=>a("game.team.joinGame")),c})()]}})}}),e(v,{get when(){return!ue()},get children(){return e(x,{href:"#",ghost:!0,size:"sm",justify:"start",class:"flex-1",disabled:!0,get children(){return[W(),(()=>{var c=X();return r(c,()=>a("game.team.canNotJoin")),c})()]}})}})]}})}})}}),null),d}})}})}var _=n("<span>"),or=n("<img width=24 height=24 alt=CTF>"),ur=n('<span class="icon-[fluent--book-number-20-regular] w-5 h-5">'),L=n("<li class=nav>"),dr=n('<span class="icon-[fluent--dumbbell-20-regular] w-5 h-5">'),gr=n('<span class="icon-[fluent--flag-20-regular] w-5 h-5">'),hr=n('<span class="icon-[fluent--megaphone-20-regular] w-5 h-5">'),Te=n('<span class="icon-[fluent--settings-20-regular] w-5 h-5">'),fr=n('<span class="icon-[fluent--code-20-regular] w-5 h-5">'),pr=n('<span class="icon-[fluent--trophy-20-regular] w-5 h-5">'),mr=n('<span class="icon-[fluent--book-open-20-regular] w-5 h-5">'),$r=n('<span class="icon-[fluent--arrow-exit-20-regular] w-5 h-5">'),wr=n("<div id=page-top class=print:hidden>"),vr=n('<div class="hidden print:flex flex-row border-b border-b-layer-content/60 w-full"><span></span><span class=flex-1></span><span>'),_r=n('<span class="icon-[fluent--wand-20-regular] w-5 h-5">'),xr=n('<ul class="flex flex-col space-y-2"><li></li><li>'),yr=n('<div class="flex flex-col space-y-2 max-w-64">'),Cr=n('<span class="flex flex-row items-center space-x-2"><span class=opacity-60>:</span><span class="font-bold opacity-80">'),br=n('<div class="flex flex-col items-center justify-center px-4 relative">'),kr=n('<span class="icon-[fluent--warning-20-filled] w-5 h-5">'),zr=n('<div class="h-16 border-b border-b-layer-content/15 w-screen bg-layer/60 backdrop-blur z-50 print:hidden print:static print:h-0 print:max-h-0 print:overflow-hidden sticky top-0 left-0 transition-colors duration-700"><div class="bg-layer-content/5 w-full h-full px-2 py-0 flex flex-row items-center relative"><div class=xl:hidden></div><div class=w-4></div><ul class="xl:flex flex-row space-x-2 items-center hidden"></ul><div class=flex-1></div><div class="flex flex-row space-x-2"><div class="hidden xl:flex flex-row space-x-2">'),Sr=n('<span class="icon-[fluent--navigation-20-regular] w-5 h-5">'),Tr=n('<span class="icon-[fluent--dismiss-circle-20-filled] w-5 h-5">'),jr=n('<div class="fixed top-0 left-0 w-screen h-screen bg-layer z-50 print:hidden"><div class="w-full h-full flex flex-col items-center pt-16 pb-24"><div class=flex-1></div><h1 class="text-3xl font-bold z-50 opacity-80"><span class="text-primary animate-ping">_</span></h1><div class="text-xl opacity-0 mt-8">&nbsp;</div><div class=flex-1>');function Ar(){const l=Q(),t=()=>l.pathname.startsWith("/docs");return e(x,{ghost:!0,get href(){return t()?"/docs":"/"},get children(){return[e(xe,{class:"hidden xl:inline-block",width:24,height:24}),_(),(()=>{var s=_();return r(s,(()=>{var u=b(()=>!!t());return()=>u()?`${a("docs.title")} - ${a("platform.name")}`:S.config.name||a("platform.name")})()),s})()]}})}function Lr(){return e(x,{ghost:!0,get href(){return`/games/${g.current?.id}/`},get children(){return[e($,{get when(){return g.current?.logo},get fallback(){return e(xe,{width:24,height:24})},get children(){var l=or();return j(()=>K(l,"src",Be(g.current.logo))),l}}),_(),(()=>{var l=_();return r(l,()=>g.current?.name),l})()]}})}function fe(l){return[(()=>{var t=L();return r(t,e(x,{class:"w-full",href:"/wiki",activeMatch:"partial",ghost:!0,justify:"start",get size(){return l.size},get children(){return[ur(),(()=>{var s=_();return r(s,()=>a("wiki.title")),s})()]}})),t})(),(()=>{var t=L();return r(t,e(x,{class:"w-full",href:"/training",activeMatch:"partial",ghost:!0,justify:"start",get size(){return l.size},get children(){return[dr(),(()=>{var s=_();return r(s,()=>a("training.title")),s})()]}})),t})(),(()=>{var t=L();return r(t,e(x,{class:"w-full",href:"/games",activeMatch:"partial",ghost:!0,justify:"start",get size(){return l.size},get children(){return[gr(),(()=>{var s=_();return r(s,()=>a("game.title")),s})()]}})),t})(),(()=>{var t=L();return r(t,e(x,{class:"w-full",href:"/bulletin",activeMatch:"partial",ghost:!0,justify:"start",get size(){return l.size},get children(){return[hr(),(()=>{var s=_();return r(s,()=>a("bulletin.title")),s})()]}})),t})(),e($,{get when(){return b(()=>!!(m.token&&m.info))()&&(m.info?.permissions.includes(V.Statistics)||m.info?.permissions.includes(V.DevOps)||m.info?.permissions.includes(V.User))},get children(){var t=L();return r(t,e(x,{class:"w-full",href:"/admin",activeMatch:"partial",ghost:!0,justify:"start",get size(){return l.size},get children(){return[Te(),(()=>{var s=_();return r(s,()=>a("admin.title")),s})()]}})),t}})]}function pe(l){return[(()=>{var t=L();return r(t,e(x,{class:"w-full",get href(){return`/games/${g.current?.id}/challenges`},activeMatch:"partial",ghost:!0,justify:"start",get size(){return l.size},get disabled(){return!de()[0]},get title(){return de()[1]},get children(){return[fr(),(()=>{var s=_();return r(s,()=>a("game.challenge.title")),s})()]}})),t})(),(()=>{var t=L();return r(t,e(x,{class:"w-full",get href(){return`/games/${g.current?.id}/scoreboard`},activeMatch:"partial",ghost:!0,justify:"start",get size(){return l.size},get children(){return[pr(),(()=>{var s=_();return r(s,()=>a("game.scoreboard.title")),s})()]}})),t})(),e($,{get when(){return b(()=>!!g.current?.end_at)()&&g.current.end_at<I.now()},get children(){var t=L();return r(t,e(x,{class:"w-full",get href(){return`/games/${g.current?.id}/writeups`},activeMatch:"partial",ghost:!0,justify:"start",get size(){return l.size},get children(){return[mr(),(()=>{var s=_();return r(s,()=>a("game.writeup.title")),s})()]}})),t}}),e($,{get when(){return Oe()},get children(){var t=L();return r(t,e(x,{class:"w-full",get href(){return`/games/${g.current?.id}/admin`},activeMatch:"partial",ghost:!0,justify:"start",get size(){return l.size},get children(){return[Te(),(()=>{var s=_();return r(s,()=>a("game.admin.title")),s})()]}})),t}}),(()=>{var t=L();return r(t,e(x,{class:"w-full",href:"/games/",ghost:!0,justify:"start",get size(){return l.size},level:"warning",get children(){return[$r(),(()=>{var s=_();return r(s,()=>a("game.exit")),s})()]}})),t})()]}function Mr(){const[l,t]=k(null),s=De(),u=Q(),d=()=>u.pathname.startsWith("/docs"),[c,o]=k(!1);function h(){o(!0),setTimeout(()=>{window.location.reload()},500)}return[wr(),(()=>{var i=vr(),f=i.firstChild,C=f.nextSibling,P=C.nextSibling;return r(f,(()=>{var R=b(()=>!!d());return()=>R()?a("docs.titleTips"):S.config.name||a("platform.name")})()),r(P,()=>I.now().toFormat("yyyy-MM-dd HH:mm:ss")),i})(),(()=>{var i=zr(),f=i.firstChild,C=f.firstChild,P=C.nextSibling,R=P.nextSibling,je=R.nextSibling,ce=je.nextSibling,Y=ce.firstChild;return r(C,e(H,{get btnContent(){return Sr()},square:!0,ghost:!0,popContentClass:"pt-2",get children(){var y=yr();return r(y,e(T,{contentClass:"p-2 flex flex-col space-y-2",get children(){var M=xr(),q=M.firstChild,ee=q.nextSibling;return r(M,e(D,{get children(){return[e(v,{get when(){return S.isOnline},get children(){return e(fe,{size:"sm"})}}),e(v,{get when(){return S.isOnline&&g.current&&g.current.host_type===J.CTFGame},get children(){return e(pe,{size:"sm"})}})]}}),q),r(M,e(Ee,{direction:"horizontal"}),q),r(M,e($,{get when(){return S.isOnline&&m.token!==null&&g.current},get children(){return e(p,{justify:"start",size:"sm",get ghost(){return l()!=="wsrx"},onClick:()=>t("wsrx"),get children(){return[(()=>{var z=_();return j(()=>B(z,`${w.instances().length>0?"icon-[fluent--fluid-20-filled]":"icon-[fluent--fluid-20-regular]"} w-5 h-5 ${w.instances().length>0?w.connected()?"text-success":"text-warning":""}`)),z})(),(()=>{var z=_();return r(z,()=>a("instance.box")),z})()]}})}}),q),r(q,e(p,{justify:"start",class:"w-full",size:"sm",get ghost(){return l()!=="notification"},onClick:()=>t("notification"),get children(){return[(()=>{var z=_();return j(()=>B(z,`${G.toasts.length>0?"icon-[fluent--alert-badge-20-filled] text-primary":"icon-[fluent--alert-20-regular]"} w-5 h-5`)),z})(),(()=>{var z=_();return r(z,()=>a("platform.notificationBox")),z})()]}})),r(ee,e(p,{justify:"start",class:"w-full",size:"sm",get ghost(){return l()!=="diy"},onClick:()=>t("diy"),get children(){return[_r(),(()=>{var z=_();return r(z,()=>a("platform.diyBox")),z})()]}})),M}}),null),r(y,e(D,{fallback:null,get children(){return[e(v,{get when(){return l()==="wsrx"},get children(){return e(be,{})}}),e(v,{get when(){return l()==="notification"},get children(){return e(Se,{})}}),e(v,{get when(){return l()==="diy"},get children(){return e(Ce,{})}})]}}),null),y}})),r(f,e(D,{get fallback(){return e(Ar,{})},get children(){return e(v,{get when(){return b(()=>!!(g.current&&g.current.host_type===J.CTFGame&&s.game))()&&u.pathname.startsWith(`/games/${s.game}`)},get children(){return e(Lr,{})}})}}),P),r(R,e(D,{get fallback(){return e(Ue,{class:"opacity-60"})},get children(){return[e(v,{get when(){return b(()=>!!(S.isOnline&&g.current&&g.current.host_type===J.CTFGame&&s.game))()&&u.pathname.startsWith(`/games/${s.game}`)},get children(){return e(pe,{size:"md"})}}),e(v,{get when(){return d()},get children(){var y=Cr(),M=y.firstChild,q=M.firstChild,ee=M.nextSibling;return r(M,()=>a("docs.forVersion"),q),r(ee,()=>S.version),y}}),e(v,{get when(){return S.isOnline},get children(){return e(fe,{size:"md"})}})]}})),r(Y,e($,{get when(){return S.isOnline&&m.token!==null&&g.current},get children(){return[e($,{get when(){return b(()=>!!(g.current&&g.current.start_at<I.now()))()&&g.current.end_at>I.now()},get children(){var y=br();return r(y,e(ae,{get end(){return g.current.end_at}}),null),r(y,e(ie,{class:"w-full",get startAt(){return g.current.start_at},get endAt(){return g.current.end_at}}),null),y}}),e(Lt,{})]}}),null),r(Y,e(Nt,{}),null),r(Y,e(pt,{}),null),r(ce,e(D,{get fallback(){return e(p,{level:"error",get loading(){return c()},onClick:h,get children(){return[e($,{get when(){return!c()},get children(){return Tr()}}),(()=>{var y=_();return r(y,()=>a("platform.unavailable")),y})()]}})},get children(){return[e(v,{get when(){return S.isOnline},get children(){return e(cr,{})}}),e(v,{get when(){return S.under_maintenance},get children(){return e(p,{level:"warning",get loading(){return c()},onClick:h,get children(){return[e($,{get when(){return!c()},get children(){return kr()}}),(()=>{var y=_();return r(y,()=>a("platform.underMaintenance")),y})()]}})}})]}}),null),i})()]}function Pr(){if(!S.accept_cookies){const l=se({level:"info",description:a("platform.cookiePolicy"),accept:()=>{re({accept_cookies:!0}),setTimeout(()=>{ne(l)},50)},acceptLabel:a("platform.ok"),reject:()=>{re({accept_cookies:!0}),setTimeout(()=>{ne(l)},50)},rejectLabel:a("platform.yes")})}}function dn(l){let t=`  [ ${S.config.name||a("platform.name")} ] `;const[s,u]=k(""),[d,c]=k(!1),o=Q().pathname==="/"&&Pe()[0].event===void 0;return _e(),Q(),Pr(),He(),re({backend_online:!1,under_maintenance:!0}),t=`  [ ${S.config.name||a("platform.name")} ] `,o&&setTimeout(()=>{const h=setInterval(()=>{s().length<t.length?u(t.slice(0,s().length+1)):(clearInterval(h),setTimeout(()=>{c(!0)},500))},100)},1e3),[e(he,{}),e(Mr,{}),b(()=>l.children),e(Ot,{}),e(Ke,{onExit:(h,i)=>{h.animate([{opacity:1},{opacity:0}],{duration:300}).finished.then(i)},get children(){return e($,{get when(){return o&&!d()},get children(){var h=jr(),i=h.firstChild,f=i.firstChild,C=f.nextSibling,P=C.firstChild;return r(h,e(he,{}),i),r(C,s,P),h}})}})]}export{dn as default};
