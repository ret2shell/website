import{P as n}from"./user-DLuZu1WC.js";import{D as t}from"./datetime-P2UEB0PT.js";import{E as c,k as s}from"./index-DHCM5LJk.js";import{a as r}from"./index-DzhbeeeD.js";const[e,o]=c({games:[],current:null,preload:null,team:null,rank:null,score:null,members:[],challenges:[],solves:[]});function _(i){const u=new Set(e.games.map(a=>a.id));o({games:[...e.games.filter(a=>!u.has(a.id)),...i]})}const p=()=>!e.current?.can_register_after_started&&e.current?.start_at&&e.current.start_at<t.now()||e.current?.end_at&&e.current.end_at<t.now()||r.id&&r.permissions.includes(n.Game)&&e.current?.admins.includes(r.id)||r.permissions.includes(n.Host)?!1:e.current?.access_policy.restrict?!!(r.info?.institute_id&&e.current.access_policy.institutes.includes(r.info.institute_id)):!0;function g(){return r.id?e.current?.admins&&(r.permissions.includes(n.Host)||e.current.admins.includes(r.id)&&r.permissions.includes(n.Game))?[!0,""]:e.current?.start_at&&e.current.start_at>t.now()?[!1,s("game.challenge.notStarted")]:e.current?.archive_at&&e.current.archive_at<t.now()?[!1,s("game.ended")]:e.current?.start_at&&e.current.start_at<t.now()&&e.current.archive_at&&e.current.archive_at>t.now()&&e.team?[!0,""]:[!1,s("game.team.joinFirst")]:[!1,s("game.team.loginThenBack")]}function h(){return r.id?!!(e.current?.admins&&(r.permissions.includes(n.Host)||e.current.admins.includes(r.id)&&r.permissions.includes(n.Game))):!1}export{g as a,_ as b,p as c,e as g,h as i,o as s};
