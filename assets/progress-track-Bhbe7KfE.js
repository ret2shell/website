import{c as C,b as w,e as y,f as I,s as T,g as V,k as $,m as g,a as p,u as E,l as M,o as N,q as S}from"./use-environment-context-C2cuRCHg.js";import{e as m,U as L,q as k}from"./index-D-4Ec2E9.js";import{u as A}from"./use-locale-context-Cw8uL8t2.js";var U=C("progress").parts("root","label","track","range","valueText","view","circle","circleTrack","circleRange"),n=U.build(),u=w({getRootId:e=>e.ids?.root??`progress-${e.id}`,getTrackId:e=>e.ids?.track??`progress-${e.id}-track`,getLabelId:e=>e.ids?.label??`progress-${e.id}-label`,getCircleId:e=>e.ids?.circle??`progress-${e.id}-circle`});function z(e,t,r){const a=e.context.percent,o=e.context.max,l=e.context.min,i=e.context.orientation,R=e.context.translations,P=e.context.isIndeterminate,s=e.context.value,h=R.value({value:s,max:o,percent:a,min:l}),c=q(s,o),f={role:"progressbar","aria-label":h,"data-max":o,"aria-valuemin":l,"aria-valuemax":o,"aria-valuenow":s??void 0,"data-orientation":i,"data-state":c},v=D(e.context);return{value:s,valueAsString:h,setValue(d){t({type:"VALUE.SET",value:d})},setToMax(){t({type:"VALUE.SET",value:o})},getRootProps(){return r.element({dir:e.context.dir,...n.root.attrs,id:u.getRootId(e.context),"data-max":o,"data-value":s??void 0,"data-state":c,"data-orientation":i,style:{"--percent":P?void 0:a}})},getLabelProps(){return r.element({dir:e.context.dir,id:u.getLabelId(e.context),...n.label.attrs,"data-orientation":i})},getValueTextProps(){return r.element({dir:e.context.dir,"aria-live":"polite",...n.valueText.attrs})},getTrackProps(){return r.element({dir:e.context.dir,id:u.getTrackId(e.context),...n.track.attrs,...f})},getRangeProps(){return r.element({dir:e.context.dir,...n.range.attrs,"data-orientation":i,"data-state":c,style:{[e.context.isHorizontal?"width":"height"]:P?void 0:`${a}%`}})},getCircleProps(){return r.element({dir:e.context.dir,id:u.getCircleId(e.context),...n.circle.attrs,...f,...v.root})},getCircleTrackProps(){return r.element({dir:e.context.dir,"data-orientation":i,...n.circleTrack.attrs,...v.track})},getCircleRangeProps(){return r.element({dir:e.context.dir,...n.circleRange.attrs,...v.range,"data-state":c})},getViewProps(d){return r.element({dir:e.context.dir,...n.view.attrs,"data-state":d.state,hidden:d.state!==c})}}}function q(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function D(e){const t={style:{"--radius":"calc(var(--size) / 2 - var(--thickness) / 2)",cx:"calc(var(--size) / 2)",cy:"calc(var(--size) / 2)",r:"var(--radius)",fill:"transparent",strokeWidth:"var(--thickness)"}};return{root:{viewBox:"0 0 var(--size) var(--size)",style:{width:"var(--size)",height:"var(--size)"}},track:t,range:{opacity:e.value===0?0:void 0,style:{...t.style,"--percent":e.percent,"--circumference":"calc(2 * 3.14159 * var(--radius))","--offset":"calc(var(--circumference) * (100 - var(--percent)) / 100}))",strokeDashoffset:"calc(var(--circumference) * ((100 - var(--percent)) / 100))",strokeDasharray:e.isIndeterminate?void 0:"var(--circumference)",transformOrigin:"center",transform:"rotate(-90deg)"}}}}function H(e,t){return e+(t-e)/2}function B(e){const t=y(e);return I({id:"progress",initial:"idle",context:{max:t.max??100,min:t.min??0,value:H(t.min??0,t.max??100),orientation:"horizontal",translations:{value:({percent:r})=>r===-1?"loading...":`${r} percent`,...t.translations},...t},created:["validateContext"],computed:{isIndeterminate:r=>r.value===null,percent(r){return T(r.value)?Math.round((r.value-r.min)/(r.max-r.min)*100):-1},isAtMax:r=>r.value===r.max,isHorizontal:r=>r.orientation==="horizontal",isRtl:r=>r.dir==="rtl"},states:{idle:{on:{"VALUE.SET":{actions:["setValue"]}}}}},{actions:{setValue:(r,a)=>{r.value=a.value===null?null:Math.max(0,Math.min(a.value,r.max))},validateContext:r=>{if(r.value!=null){if(!x(r.max))throw new Error(`[progress] The max value passed \`${r.max}\` is not a valid number`);if(!O(r.value,r.max))throw new Error(`[progress] The value passed \`${r.value}\` exceeds the max value \`${r.max}\``);if(!W(r.value,r.min))throw new Error(`[progress] The value passed \`${r.value}\` exceeds the min value \`${r.min}\``)}}}})}function x(e){return T(e)&&!isNaN(e)}function O(e,t){return x(e)&&e<=t}function W(e,t){return x(e)&&e>=t}V()(["dir","getRootNode","id","ids","max","min","orientation","translations","value"]);const[j,b]=$({hookName:"useProgressContext",providerName:"<ProgressProvider />"}),Q=e=>{const t=b(),r=g(()=>t().getRangeProps(),e);return m(p.div,r)},F=e=>{const t=A(),r=E(),a=L(),o=k(()=>({id:a,dir:t().dir,getRootNode:r().getRootNode,...e})),[l,i]=M(B(o()),{context:o});return k(()=>z(l,i,N))},X=e=>{const[t,r]=S()(e,["id","ids","max","min","orientation","translations","value"]),a=F(t),o=g(()=>a().getRootProps(),r);return m(j,{value:a,get children(){return m(p.div,o)}})},Y=e=>{const t=b(),r=g(()=>t().getTrackProps(),e);return m(p.div,r)};export{Y as P,Q as a,X as b};
