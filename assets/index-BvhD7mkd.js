import{c,b as M,d as P,e as r,k as i,j as l,S as T,l as j,r as F,F as L,M as u,q as k,v as z,t as s}from"./index-DHCM5LJk.js";import{g as A}from"./bulletin-BB9hU5Qg.js";import{S as B}from"./spin-B3vkVWkZ.js";import{r as D}from"./loading-tips-CelvmSQ5.js";import{P as E}from"./user-DLuZu1WC.js";import{a as q}from"./index-DzhbeeeD.js";import{p as N,T as R}from"./header-C2rgC6oY.js";import{a as G}from"./toast-Bmssr5_f.js";import{D as g}from"./divider-D2gFZMAr.js";import{L as h}from"./link-C85afmZZ.js";import{P as H}from"./pagination-Ar0f-7ni.js";import"./datetime-P2UEB0PT.js";import"./components-Dq7YmzrW.js";import"./use-environment-context-CrE27ks0.js";import"./use-locale-context-Bwyb0cy2.js";var I=s('<span class="icon-[fluent--add-20-regular] w-5 h-5">'),d=s("<span>"),J=s('<div class="flex-1 flex flex-col items-center justify-center space-y-8 opacity-60"><span class="icon-[fluent--megaphone-20-regular] w-24 h-24"></span><span>'),K=s('<div class="flex-1 flex flex-col items-center justify-center space-y-8 opacity-60"><span>'),O=s('<div class="flex flex-col space-y-2 p-3 lg:p-6 flex-1 w-full max-w-5xl self-center"><div class="h-12 relative flex flex-row items-center px-4"><h1 class="space-x-2 flex flex-row items-center flex-1"><span class="icon-[fluent--megaphone-20-regular] w-5 h-5"></span><span class=font-bold>'),Q=s('<span class="flex-1 text-start truncate font-normal">'),U=s("<span class=opacity-60>");function pe(){const[p,$]=c([]),[x,_]=c(0),[o,v]=c(1),[f,m]=c(!1);function w(){m(!0),A(o(),10).then(([a,n])=>{$(a),_(n)}).catch(a=>{a.response.text().then(n=>{G({level:"error",description:`${i("bulletin.fetchFailed")}: ${n}`,duration:5e3})})}).finally(()=>m(!1))}return M(()=>{o()&&P(w)}),[r(R,{get title(){return`${i("bulletin.title")} - ${N.config.name||i("platform.name")}`}}),(()=>{var a=O(),n=a.firstChild,y=n.firstChild,b=y.firstChild,S=b.nextSibling;return l(S,()=>i("bulletin.title")),l(n,r(T,{get when(){return q.permissions.includes(E.Bulletin)},get children(){return r(h,{size:"sm",level:"primary",href:"/bulletin/create",get children(){return[I(),(()=>{var e=d();return l(e,()=>i("bulletin.create")),e})()]}})}}),null),l(n,r(g,{class:"absolute bottom-0 left-2 right-2"}),null),l(a,r(L,{get each(){return p()},children:e=>r(h,{ghost:!0,justify:"start",get href(){return`/bulletin/${e.id}`},class:"overflow-hidden relative",get children(){return[(()=>{var t=d();return j(()=>F(t,`icon-[fluent--megaphone-20-${e.weight>=1?"filled":"regular"}] w-5 h-5 text-${e.weight>=1?"primary":"layer-content"}`)),t})(),(()=>{var t=Q();return l(t,()=>e.title),t})(),(()=>{var t=U();return l(t,()=>e.created_at.toFormat("yyyy-MM-dd")),t})(),r(g,{class:"absolute bottom-0 left-2 right-2"})]}})}),null),l(a,r(z,{get children(){return[r(u,{get when(){return k(()=>p().length===0)()&&!f()},get children(){var e=J(),t=e.firstChild,C=t.nextSibling;return l(C,()=>i("bulletin.noMore")),e}}),r(u,{get when(){return f()},get children(){var e=K(),t=e.firstChild;return l(e,r(B,{width:32,height:32}),t),l(t,D),e}})]}}),null),a})(),r(H,{class:"p-6 lg:p-9",get count(){return o()*x()},pageSize:10,get page(){return o()},onPageChange:a=>v(a.page)})]}export{pe as default};
