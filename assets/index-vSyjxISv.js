import{z as F,y as D,w as T,b as K,d as O,a as U,e as a,k as s,j as r,S as d,l as $,i as w,t as l,f as z}from"./index-DHCM5LJk.js";import{g as v,s as _,w as t,d as B,r as b}from"./wiki-2Ru4Rn3u.js";import{S as I}from"./spin-B3vkVWkZ.js";import{P as R}from"./user-DLuZu1WC.js";import{a as q}from"./index-DzhbeeeD.js";import{p as G,T as J}from"./header-C2rgC6oY.js";import{a as m}from"./toast-Bmssr5_f.js";import{A as L}from"./article-OyBfJmMV.js";import{D as Q}from"./divider-D2gFZMAr.js";import{E as V}from"./form-D6eKNXt2.js";import{A as y}from"./components-Dq7YmzrW.js";import"./datetime-P2UEB0PT.js";import"./card-D1oJOCbi.js";import"./loading-tips-D8Ukv1g_.js";import"./loading-tips-CelvmSQ5.js";import"./popover-C_nceKuQ.js";import"./use-environment-context-CrE27ks0.js";import"./popover-root-Bs3_F_Uf.js";import"./use-presence-context-C0VfJ-0L.js";import"./use-locale-context-Bwyb0cy2.js";import"./article-DsbJ-ALU.js";import"./button-CWvnh7OL.js";import"./editor-CCtxy95a.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./setValue-Bf_BOLWD.js";import"./Form-CGI4Segl.js";import"./input-Cs8V4IvD.js";import"./setValues-D24qEHVO.js";import"./required-C9pyDEac.js";var f=l("<span>"),X=l('<span class="icon-[fluent--person-20-regular] w-5 h-5 print:hidden">'),Y=l('<span class="hidden print:inline-block">By'),Z=l('<div class="font-bold flex flex-row space-x-2 items-center print:hidden"><span class="icon-[fluent--calendar-edit-20-regular] w-5 h-5"></span><span>'),ee=l('<span class="icon-[fluent--edit-20-regular] w-5 h-5">'),te=l('<button class="font-bold hover:underline flex flex-row space-x-2 items-center print:hidden"type=button><span class="icon-[fluent--delete-20-regular] w-5 h-5"></span><span>'),re=l('<div class="flex-1 flex flex-col items-center"><h1 class="text-3xl flex flex-row space-x-4 items-center w-full px-3 lg:px-6 max-w-5xl justify-start print:justify-center font-bold mt-8 print:mt-16"></h1><div class="flex flex-row items-center w-full px-3 lg:px-6 max-w-5xl justify-start print:justify-center space-x-6 print:space-x-2 opacity-60 flex-wrap py-3"><div class="font-bold flex flex-row space-x-2 items-center"><span class="icon-[fluent--calendar-20-regular] w-5 h-5 print:hidden"></span><span class="hidden print:inline-block">at</span><span></span></div><button class="font-bold hover:underline flex flex-row space-x-2 items-center print:hidden"type=button><span class="icon-[fluent--print-20-regular] w-5 h-5"></span><span>');function We(){const k=F(),h=()=>Number.parseInt(k.article),[S,N]=D(),C=()=>S.edit==="true",c=T();K(()=>{Number.isNaN(h())&&c("/sigtrap/404",{replace:!0}),O(()=>{v(h()).then(n=>{_({current:n})}).catch(n=>{n.response.text().then(i=>{m({level:"error",description:i,duration:5e3}),c(`/sigtrap/${n.response.status}`,{replace:!0})})})})}),U(()=>{_({current:null})});function H(){B(h()).then(()=>{m({level:"success",description:s("wiki.deleteSuccess"),duration:5e3}),b().then(()=>c("/wiki",{replace:!0}))}).catch(n=>{n.response.text().then(i=>{m({level:"error",description:i,duration:5e3})})})}function M(n){v(n.id).then(i=>{_({current:i}),b()}).catch(i=>{i.response.text().then(o=>{m({level:"error",description:o,duration:5e3}),c(`/sigtrap/${i.response.status}`,{replace:!0})})}),N({edit:void 0})}return[a(J,{get title(){return`${t.current?.title} - ${G.config.name||s("platform.name")}`}}),(()=>{var n=re(),i=n.firstChild,o=i.nextSibling,p=o.firstChild,A=p.firstChild,P=A.nextSibling,W=P.nextSibling,u=p.nextSibling,E=u.firstChild,j=E.nextSibling;return r(i,a(d,{get when(){return t.current},get fallback(){return[a(I,{width:32,height:32}),(()=>{var e=f();return r(e,()=>s("article.loading")),e})()]},get children(){var e=f();return r(e,()=>t.current.title),e}})),r(o,a(y,{class:"hover:underline font-bold flex flex-row space-x-2 items-center",get title(){return s("article.by",{name:t.current?.publisher_name||s("article.unknownPublisher")})},get href(){return`/users/${t.current?.publisher_id}`},get children(){return[X(),Y(),(()=>{var e=f();return r(e,()=>t.current?.publisher_name),e})()]}}),p),r(W,()=>t.current?.created_at.toFormat("yyyy-MM-dd HH:mm:ss")),r(o,a(d,{get when(){return t.current?.created_at&&t.current?.updated_at&&t.current.created_at!==t.current.updated_at},get children(){var e=Z(),x=e.firstChild,g=x.nextSibling;return r(g,()=>t.current?.updated_at.toFormat("yyyy-MM-dd HH:mm:ss")),$(()=>w(e,"title",s("article.updatedAt",{time:t.current?.updated_at.toFormat("yyyy-MM-dd HH:mm:ss")||"UNKNOWN"}))),e}}),u),r(o,a(d,{get when(){return q.permissions.includes(R.Wiki)},get children(){return[a(y,{class:"font-bold hover:underline flex flex-row space-x-2 items-center print:hidden",get href(){return`/wiki/${t.current?.id}?edit=true`},get children(){return[ee(),(()=>{var e=f();return r(e,()=>s("form.edit")),e})()]}}),(()=>{var e=te(),x=e.firstChild,g=x.nextSibling;return e.$$click=H,r(g,()=>s("form.delete")),e})()]}}),u),u.$$click=()=>print(),r(j,()=>s("form.print")),r(n,a(Q,{class:"w-full max-w-5xl"}),null),r(n,a(d,{get when(){return C()},get fallback(){return a(L,{class:"self-center",get content(){return t.current?.content||""},extra:!0,headingAnchors:!0,toc:!0})},get children(){return a(V,{get editSource(){return t.current||void 0},onDone:M})}}),null),$(()=>w(p,"title",s("article.createdAt",{time:t.current?.created_at.toFormat("yyyy-MM-dd HH:mm:ss")||"UNKNOWN"}))),n})()]}z(["click"]);export{We as default};
